<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><link href="https://cdn.jsdelivr.net/npm/hexo-tag-common@latest/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="å¤šå¼—æœ—æ˜å“¥"><meta name="copyright" content="å¤šå¼—æœ—æ˜å“¥"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>Effective JavaScript (å) | å”å‰è¯ƒå¾·çš„å°ç«™</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" href="https://cdn.darknights.cn/assets/images/favicon.ico"><link rel="mask-icon" href="https://cdn.darknights.cn/assets/images/favicon.ico" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"sdongzhi.com","root":"/","title":"å”å‰è¯ƒå¾·çš„å°ç«™","version":"1.6.2","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"algolia":{"appID":"ZH3RNMJ8TX","apiKey":"d3c4e9cb3d4b25b901414d257a20d970","indexName":"Pages","hits":{"per_page":8}},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="å”å‰è¯ƒå¾·çš„å°ç«™" type="application/atom+xml"><link rel="stylesheet" href="/styles/custom.css"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107257239-1"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-107257239-1');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="å¹¶å‘JavaScriptè¢«è®¾è®¡æˆä¸€ç§åµŒå…¥å¼çš„è„šæœ¬è¯­è¨€ã€‚å®ƒä¸æ˜¯ä»¥å•ç‹¬çš„åº”ç”¨ç¨‹åºè¿è¡Œï¼Œè€Œæ˜¯ä½œä¸ºå¤§å‹åº”ç”¨ç¨‹åºç¯å¢ƒä¸‹çš„è„šæœ¬è¿è¡Œã€‚å…¸å‹çš„ä¾‹å­å½“ç„¶æ˜¯Webæµè§ˆå™¨ã€‚JavaScriptä¸­ç¼–å†™å“åº”å¤šä¸ªå¹¶å‘äº‹ä»¶çš„ç¨‹åºçš„æ–¹æ³•éå¸¸äººæ€§åŒ–ï¼Œè€Œä¸”å¼ºå¤§ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„æ‰§è¡Œæ¨¡å‹(æœ‰æ—¶ç§°ä¸ºäº‹ä»¶é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯å¹¶å‘)å’Œè¢«ç§°ä¸ºå¼‚æ­¥çš„API.å¥‡æ€ªçš„æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼ŒECMAScriptæ ‡å‡†ä»æ¥æ²¡æœ‰å…³äºå¹¶å‘çš„è¯´æ˜ã€‚æˆ‘ä»¬è®¨è®ºçš„éƒ½æ˜¯â€œçº¦">
<meta property="og:type" content="article">
<meta property="og:title" content="Effective JavaScript (å)">
<meta property="og:url" content="https://sdongzhi.com/2018/09/28/read-book-effective-ten/index.html">
<meta property="og:site_name" content="å”å‰è¯ƒå¾·çš„å°ç«™">
<meta property="og:description" content="å¹¶å‘JavaScriptè¢«è®¾è®¡æˆä¸€ç§åµŒå…¥å¼çš„è„šæœ¬è¯­è¨€ã€‚å®ƒä¸æ˜¯ä»¥å•ç‹¬çš„åº”ç”¨ç¨‹åºè¿è¡Œï¼Œè€Œæ˜¯ä½œä¸ºå¤§å‹åº”ç”¨ç¨‹åºç¯å¢ƒä¸‹çš„è„šæœ¬è¿è¡Œã€‚å…¸å‹çš„ä¾‹å­å½“ç„¶æ˜¯Webæµè§ˆå™¨ã€‚JavaScriptä¸­ç¼–å†™å“åº”å¤šä¸ªå¹¶å‘äº‹ä»¶çš„ç¨‹åºçš„æ–¹æ³•éå¸¸äººæ€§åŒ–ï¼Œè€Œä¸”å¼ºå¤§ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„æ‰§è¡Œæ¨¡å‹(æœ‰æ—¶ç§°ä¸ºäº‹ä»¶é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯å¹¶å‘)å’Œè¢«ç§°ä¸ºå¼‚æ­¥çš„API.å¥‡æ€ªçš„æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼ŒECMAScriptæ ‡å‡†ä»æ¥æ²¡æœ‰å…³äºå¹¶å‘çš„è¯´æ˜ã€‚æˆ‘ä»¬è®¨è®ºçš„éƒ½æ˜¯â€œçº¦">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-09-28T00:00:00.000Z">
<meta property="article:modified_time" content="2021-09-27T06:34:37.005Z">
<meta property="article:author" content="å¤šå¼—æœ—æ˜å“¥">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="è¯»ä¹¦æ€»ç»“">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="å¤šå¼—æœ—æ˜å“¥"><img width="96" loading="lazy" src="/images/avatar.jpeg" alt="å¤šå¼—æœ—æ˜å“¥"><span class="site-author-status" title="Looking for dawn.">ğŸŒ‘</span></a><div class="site-author-name"><a href="/about/">å¤šå¼—æœ—æ˜å“¥</a></div><a class="site-name" href="/about/site.html">å”å‰è¯ƒå¾·çš„å°ç«™</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">54</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">19</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">36</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/IORI20091101" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/iori20091101" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/donduffy" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:sdzzlyjy@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.link" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-train-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91"><span class="toc-number">1.</span> <span class="toc-text">å¹¶å‘</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E9%98%BB%E5%A1%9EI-O%E4%BA%8B%E4%BB%B6%E9%98%9F%E5%88%97"><span class="toc-number">2.</span> <span class="toc-text">ä¸è¦é˜»å¡I&#x2F;Oäº‹ä»¶é˜Ÿåˆ—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E5%BC%82%E6%AD%A5%E5%BA%8F%E5%88%97%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B5%8C%E5%A5%97%E6%88%96%E5%91%BD%E5%90%8D%E7%9A%84%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">3.</span> <span class="toc-text">åœ¨å¼‚æ­¥åºåˆ—ä¸­ä½¿ç”¨åµŒå¥—æˆ–å‘½åçš„å›è°ƒå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BD%93%E5%BF%83%E4%B8%A2%E5%BC%83%E9%94%99%E8%AF%AF"><span class="toc-number">4.</span> <span class="toc-text">å½“å¿ƒä¸¢å¼ƒé”™è¯¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E5%BC%82%E6%AD%A5%E5%BE%AA%E7%8E%AF%E4%BD%BF%E7%94%A8%E9%80%92%E5%BD%92"><span class="toc-number">5.</span> <span class="toc-text">å¯¹å¼‚æ­¥å¾ªç¯ä½¿ç”¨é€’å½’</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E8%A6%81%E5%9C%A8%E8%AE%A1%E7%AE%97%E6%97%B6%E9%98%BB%E5%A1%9E%E4%BA%8B%E4%BB%B6%E9%98%9F%E5%88%97"><span class="toc-number">6.</span> <span class="toc-text">ä¸è¦åœ¨è®¡ç®—æ—¶é˜»å¡äº‹ä»¶é˜Ÿåˆ—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%AE%A1%E6%95%B0%E5%99%A8%E6%9D%A5%E6%89%A7%E8%A1%8C%E5%B9%B6%E8%A1%8C%E6%93%8D%E4%BD%9C"><span class="toc-number">7.</span> <span class="toc-text">ä½¿ç”¨è®¡æ•°å™¨æ¥æ‰§è¡Œå¹¶è¡Œæ“ä½œ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9D%E4%B8%8D%E8%A6%81%E5%90%8C%E6%AD%A5%E7%9A%84%E8%B0%83%E7%94%A8%E5%BC%82%E6%AD%A5%E7%9A%84%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">8.</span> <span class="toc-text">ç»ä¸è¦åŒæ­¥çš„è°ƒç”¨å¼‚æ­¥çš„å›è°ƒå‡½æ•°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8promise%E6%A8%A1%E5%BC%8F%E6%B8%85%E6%B4%81%E5%BC%82%E6%AD%A5%E9%80%BB%E8%BE%91"><span class="toc-number">9.</span> <span class="toc-text">ä½¿ç”¨promiseæ¨¡å¼æ¸…æ´å¼‚æ­¥é€»è¾‘</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://sdongzhi.com/2018/09/28/read-book-effective-ten/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="å¤šå¼—æœ—æ˜å“¥"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="å”å‰è¯ƒå¾·çš„å°ç«™"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Effective JavaScript (å)<a class="post-edit-link" href="https://github.com/YunYouJun/yunyoujun.github.io/tree/hexo/source/_posts/read-book-effective-ten.md" target="_blank" title="ç¼–è¾‘" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2018-09-28 00:00:00" itemprop="dateCreated datePublished" datetime="2018-09-28T00:00:00+00:00">2018-09-28</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-27 06:34:37" itemprop="dateModified" datetime="2021-09-27T06:34:37+00:00">2021-09-27</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="æœ¬æ–‡å­—æ•°">2.9k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="é˜…è¯»æ—¶é•¿">13m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E8%AF%BB%E4%B9%A6%E6%80%BB%E7%BB%93/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">è¯»ä¹¦æ€»ç»“</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/javascript/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">javascript</span></a><a class="tag-item" href="/tags/%E8%AF%BB%E4%B9%A6%E6%80%BB%E7%BB%93/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">è¯»ä¹¦æ€»ç»“</span></a></span></div><div class="post-author"><span class="author-name">toshiba</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h2 id="å¹¶å‘"><a href="#å¹¶å‘" class="headerlink" title="å¹¶å‘"></a>å¹¶å‘</h2><p>JavaScriptè¢«è®¾è®¡æˆä¸€ç§åµŒå…¥å¼çš„è„šæœ¬è¯­è¨€ã€‚å®ƒä¸æ˜¯ä»¥å•ç‹¬çš„åº”ç”¨ç¨‹åºè¿è¡Œï¼Œè€Œæ˜¯ä½œä¸ºå¤§å‹åº”ç”¨ç¨‹åºç¯å¢ƒä¸‹çš„è„šæœ¬è¿è¡Œã€‚å…¸å‹çš„ä¾‹å­å½“ç„¶æ˜¯Webæµè§ˆå™¨ã€‚<br>JavaScriptä¸­ç¼–å†™å“åº”å¤šä¸ªå¹¶å‘äº‹ä»¶çš„ç¨‹åºçš„æ–¹æ³•éå¸¸äººæ€§åŒ–ï¼Œè€Œä¸”å¼ºå¤§ï¼Œå› ä¸ºå®ƒä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„æ‰§è¡Œæ¨¡å‹(æœ‰æ—¶ç§°ä¸ºäº‹ä»¶é˜Ÿåˆ—å’Œäº‹ä»¶å¾ªç¯å¹¶å‘)å’Œè¢«ç§°ä¸ºå¼‚æ­¥çš„API.<br>å¥‡æ€ªçš„æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼ŒECMAScriptæ ‡å‡†ä»æ¥æ²¡æœ‰å…³äºå¹¶å‘çš„è¯´æ˜ã€‚æˆ‘ä»¬è®¨è®ºçš„éƒ½æ˜¯â€œçº¦å®šæˆä¿—â€çš„JavaScriptç‰¹æ€§ï¼Œå¹¶ä¸æ˜¯å®˜æ–¹æ ‡å‡†ã€‚ç„¶è€Œï¼Œç»å¤§å¤šæ•°JavaScriptçš„ç¯å¢ƒéƒ½ä½¿ç”¨ç›¸åŒçš„å¹¶å‘ç­–ç•¥ï¼Œæœªæ¥æ ‡å‡†çš„ç‰ˆæœ¬å¾ˆæœ‰å¯èƒ½ä¼šåŸºäºå¹¿æ³›å®ç°çš„æ‰§è¡Œæ¨¡å‹æ¥æ ‡å‡†åŒ–ã€‚ä¸ç®¡æ ‡å‡†å¦‚ä½•å®šä¹‰ï¼Œä½¿ç”¨äº‹ä»¶å’Œå¼‚æ­¥APIæ˜¯JavaScriptç¼–ç¨‹çš„åŸºç¡€éƒ¨åˆ†ã€‚</p>
<h2 id="ä¸è¦é˜»å¡I-Oäº‹ä»¶é˜Ÿåˆ—"><a href="#ä¸è¦é˜»å¡I-Oäº‹ä»¶é˜Ÿåˆ—" class="headerlink" title="ä¸è¦é˜»å¡I/Oäº‹ä»¶é˜Ÿåˆ—"></a>ä¸è¦é˜»å¡I/Oäº‹ä»¶é˜Ÿåˆ—</h2><p>JavaScriptç¨‹åºæ˜¯å»ºç«‹åœ¨äº‹ä»¶ä¹‹ä¸Šçš„ã€‚è¾“å…¥å¯èƒ½æ¥è‡ªå„ç§å„æ ·çš„å¤–éƒ¨æºï¼Œç”¨æˆ·çš„äº¤äº’æ“ä½œï¼Œè¾“å…¥çš„ç½‘ç»œæ•°æ®æˆ–å®šæ—¶è­¦æŠ¥ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå†™è¿™æ ·çš„ä»£ç æ¥ç­‰å¾…æŸä¸ªç‰¹å®šçš„è¾“å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var text = downloadSync(&quot;http://example.com/file.txt&quot;);</span><br><span class="line"></span><br><span class="line">console.log(text);</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·çš„å‡½æ•°é€šå¸¸è¢«ç§°ä¸ºåŒæ­¥å‡½æ•°æˆ–é˜»å¡å‡½æ•°ï¼Œ ç¨‹åºä¼šåœæ­¢å·¥ä½œï¼Œç­‰å¾…å®ƒçš„è¾“å…¥ã€‚è¿™ä¸ªä¾‹å­æ˜¯ç­‰çš„ç½‘ç»œä¸‹è½½æ–‡ä»¶çš„ç»“æœã€‚</p>
<p>åœ¨JavaScriptä¸­ï¼Œå¤§å¤šæ•°çš„I/Oæ“ä½œéƒ½æä¾›äº†å¼‚æ­¥çš„æˆ–éé˜»å¡çš„API, ç¨‹åºæä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸€æ—¦è¾“å…¥å®Œæˆå°±å¯ä»¥è¢«ç³»ç»Ÿè°ƒç”¨ï¼Œ è€Œä¸æ˜¯å°†ç¨‹åºé˜»å¡åœ¨ç­‰å¾…ç»“æœçš„çº¿ç¨‹ä¸Šã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dowanloadAsync(&quot;http://example.com/file.txt&quot;, function(text) &#123;</span><br><span class="line">	console.log(text);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>JavaScriptå¹¶å‘çš„ä¸€ä¸ªé‡è¦è§„åˆ™æ˜¯ç»ä¸è¦åœ¨åº”ç”¨ç¨‹åºäº‹ä»¶é˜Ÿåˆ—ä¸­ä½¿ç”¨é˜»å¡I/Oçš„APIã€‚å¯¹äºWebåº”ç”¨ç¨‹åºçš„äº¤äº’æ€§ï¼ŒåŒæ­¥çš„I/Oä¼šå¯¼è‡´ç¾éš¾æ€§çš„ç»“æœï¼Œåœ¨æ“ä½œå®Œæˆä¹‹å‰ä¸€ç›´ä¼šé˜»å¡ç”¨æˆ·äºé¡µé¢çš„äº¤äº’ã€‚</p>
<p>Webå¹³å°æä¾›äº†Workderçš„APIï¼Œä½¿å¾—äº§ç”Ÿå¤§é‡çš„å¹¶è¡Œè®¡ç®—ç§°ä¸ºå¯èƒ½ã€‚ä¸åŒäºä¼ ç»Ÿçš„çº¿ç¨‹æ‰§è¡ŒWorkdersåœ¨ä¸€ä¸ªå®Œå…¨éš”ç¦»çš„çŠ¶æ€ä¸‹è¿›è¡Œï¼Œæ²¡æœ‰è·å–å…¨å±€ä½œç”¨åŸŸæˆ–åº”ç”¨ç¨‹åºä¸»çº¿ç¨‹Webé¡µé¢å†…å®¹çš„èƒ½åŠ›ã€‚å› æ­¤å®ƒä¸å›å¦¨ç¢ä¸»äº‹ä»¶é˜Ÿåˆ—ä¸­è¿è¡Œçš„ä»£ç çš„æ‰§è¡Œã€‚åœ¨ä¸€ä¸ªWorkerä¸­ä½¿ç”¨XMLHttpRequeståŒæ­¥çš„å˜ç§å¾ˆå°‘å‡ºé—®é¢˜ã€‚ä¸‹è½½æ“ä½œçš„ç¡®ä¼šé˜»å¡Workerç»§ç»­è¿è¡Œï¼Œä½†è¿™å¹¶ä¸ä¼šç»„ç»‡è¦ä¹ˆçš„æ¸²æŸ“æˆ–äº‹ä»¶é˜Ÿåˆ—ä¸­çš„äº‹ä»¶å“åº”ã€‚</p>
<h2 id="åœ¨å¼‚æ­¥åºåˆ—ä¸­ä½¿ç”¨åµŒå¥—æˆ–å‘½åçš„å›è°ƒå‡½æ•°"><a href="#åœ¨å¼‚æ­¥åºåˆ—ä¸­ä½¿ç”¨åµŒå¥—æˆ–å‘½åçš„å›è°ƒå‡½æ•°" class="headerlink" title="åœ¨å¼‚æ­¥åºåˆ—ä¸­ä½¿ç”¨åµŒå¥—æˆ–å‘½åçš„å›è°ƒå‡½æ•°"></a>åœ¨å¼‚æ­¥åºåˆ—ä¸­ä½¿ç”¨åµŒå¥—æˆ–å‘½åçš„å›è°ƒå‡½æ•°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.lookupAsync(&quot;url&quot;, function(url) &#123;</span><br><span class="line">	//	</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">downloadAsync(url, function(text) &#123;</span><br><span class="line">	console.log(&quot;contents of &quot; + url + &quot; : &quot; + text);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä¸¤ä¸ªå¼‚æ­¥å‡½æ•°ç¬¬äºŒä¸ªçš„urlè¯»å–ä¸åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åµŒå¥—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.lookupAsync(&quot;url&quot;, function(url) &#123;</span><br><span class="line">	downloadAsync(url, function(text) &#123;</span><br><span class="line">		console.log(&quot;contents of &quot; + url + &quot; : &quot; + text);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å›è°ƒå‡½æ•°è¶Šæ¥è¶Šå¤šä¼šå˜å¾—å¾ˆç¬¨æ‹™ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">db.lookupAsync(&quot;url&quot;, function(url) &#123;</span><br><span class="line">	downloadAsync(url, function(text) &#123;</span><br><span class="line">		downloadAsync(&quot;a.txt&quot;, function(a) &#123;</span><br><span class="line">			downloadAsync(&quot;b.txt&quot;, function(b) &#123;</span><br><span class="line">				// ...</span><br><span class="line">			&#125;)	</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å‡å°‘åµŒå¥—çš„æ–¹æ³•ä¹‹ä¸€å°±æ˜¯å°†åµŒå¥—çš„å›è°ƒå‡½æ•°ä½œä¸ºå‘½åçš„å‡½æ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">db.lookupAsync(&quot;url&quot;, downloadURL);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ä»ç„¶æœ‰åµŒå¥—</span><br><span class="line">function downloadURL(url) &#123;</span><br><span class="line">	downloadAsync(url, function(text) &#123;</span><br><span class="line">		showContents(url, text);</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function showContents(url, text) &#123;</span><br><span class="line">	console.log(&quot;contents of &quot; + url + &quot; : &quot; + text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä¾‹å­ä¸­ä»ç„¶æœ‰åµŒå¥—ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨bindæ–¹æ³•æ¶ˆé™¤æœ€æ·±å±‚çš„åµŒå¥—å›è°ƒå‡½æ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">db.lookupAsync(&quot;url&quot;, downloadURL);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ä»ç„¶æœ‰åµŒå¥—</span><br><span class="line">function downloadURL(url) &#123;</span><br><span class="line">	downloadAsync(url, showContents.bind(null, url));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function showContents(url, text) &#123;</span><br><span class="line">	console.log(&quot;contents of &quot; + url + &quot; : &quot; + text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¦‚æœå±‚çº§è¿‡å¤šä»ç„¶ä¼šæœ‰é—®é¢˜ï¼Œ æ¯”å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">db.lookupAsync(&quot;url&quot;, downloadURL);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function downloadURL(url) &#123;</span><br><span class="line">	downloadAsync(url, downloadABC.bind(null, url));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function downloadABC(url, file) &#123;</span><br><span class="line">	downloasAsync(&quot;a.txt&quot;, downloadFileBC.bind(null, url, file))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function downloadBC(url, file, a) &#123;</span><br><span class="line">	downloasAsync(&quot;b.txt&quot;, downloadFileFinish.bind(null, url, file, a))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function downloadFileFinish(url, file, a, b) &#123;</span><br><span class="line">	// ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æ¯”å¦‚å°´å°¬çš„å‡½æ•°å‘½åï¼Œå’Œå‚æ•°ä¼ é€’ã€‚æœ€å¥½çš„æ–¹å¼è¿˜æ˜¯å°†ä¸¤ç§æ–¹å¼ç»“åˆã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">db.lookupAsync(&quot;url&quot;, function(url) &#123;</span><br><span class="line">	downloadURLAndFiles(url);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function downloadURLAndFiles(url) &#123;</span><br><span class="line">	downloadAsync(url, downloadFiles.bind(null, url));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function downloadFiles(url, file) &#123;</span><br><span class="line">	downloadAsync(&quot;a.txt&quot;, function(a) &#123;</span><br><span class="line">		downloadAsync(&quot;b.txt&quot;, function(b) &#123;</span><br><span class="line">			// ...</span><br><span class="line">		&#125;)	</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ›´å¥½çš„æ–¹æ³•æ˜¯æŠ½è±¡å‡ºä¸€ä¸ªå¯ä»¥ä¸‹è½½å¤šä¸ªæ–‡ä»¶çš„æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function downloadFiles(url, file) &#123;</span><br><span class="line">	downloadAllAsync([&quot;a.txt&quot;, &quot;b.txt&quot;, &quot;c.txt&quot;], function(all) &#123;</span><br><span class="line">		var a = all[0], b = all[1], c = all[2];</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å½“å¿ƒä¸¢å¼ƒé”™è¯¯"><a href="#å½“å¿ƒä¸¢å¼ƒé”™è¯¯" class="headerlink" title="å½“å¿ƒä¸¢å¼ƒé”™è¯¯"></a>å½“å¿ƒä¸¢å¼ƒé”™è¯¯</h2><p>åŒæ­¥ä»£ç æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>try...catch</code>æ¥æ•è·æ‰€æœ‰é”™è¯¯ï¼Œæ¯”å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">	f();</span><br><span class="line">	g();</span><br><span class="line">	h();</span><br><span class="line">&#125; catch(e) &#123;</span><br><span class="line">	// handle any error that occured</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å¼‚æ­¥ä»£ç æ ¹æœ¬ä¸å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œ é€šå¸¸å¼‚æ­¥APIä¼šæœ‰ä¸€ä¸ªé¢å¤–çš„å›è°ƒå‡½æ•°æ¥å¤„ç†ç½‘ç»œé”™è¯¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">downloadAsync(&quot;url&quot;, function(text) &#123;</span><br><span class="line">		</span><br><span class="line">&#125;, function(err) &#123;</span><br><span class="line">	console.log(&quot;Error &quot; + err)	;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">å¤šä¸ªå›è°ƒæ—¶å¯ä»¥æå–å…¬å…±éƒ¨åˆ†</span><br><span class="line"></span><br><span class="line">function onErr(err) &#123;</span><br><span class="line">	console.log(&quot;Error &quot; + err)	;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">downloadAsync(&quot;url&quot;, function(text) &#123;</span><br><span class="line">		</span><br><span class="line">&#125;, onErr);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Node.js å¼‚æ­¥å¤„ç†APIçš„é”™è¯¯å¤„ç†ï¼Œæˆ‘ä»¬é€šè¿‡ifåˆ¤æ–­æ¥æ§åˆ¶æ¯ä¸ªå›è°ƒå‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function onErr(err) &#123;</span><br><span class="line">	console.log(&quot;Error &quot; + err)	;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">downloadAsync(&quot;url&quot;, function(error, text) &#123;</span><br><span class="line">	if(error) &#123;</span><br><span class="line">		onError(error);</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//success</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ›´ç®€æ´å†™æ³•</span><br><span class="line"></span><br><span class="line">downloadAsync(&quot;url&quot;, function(error, text) &#123;</span><br><span class="line">	if(error) return onError(error);</span><br><span class="line"></span><br><span class="line">	//success</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å¯¹å¼‚æ­¥å¾ªç¯ä½¿ç”¨é€’å½’"><a href="#å¯¹å¼‚æ­¥å¾ªç¯ä½¿ç”¨é€’å½’" class="headerlink" title="å¯¹å¼‚æ­¥å¾ªç¯ä½¿ç”¨é€’å½’"></a>å¯¹å¼‚æ­¥å¾ªç¯ä½¿ç”¨é€’å½’</h2><p>å¦‚æœä¸€ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªURLçš„æ•°ç»„å¹¶å°è¯•ä¸‹è½½ä¹°æ¯ä¸ªæ–‡ä»¶ï¼Œå¦‚æœAPIæ˜¯åŒæ­¥çš„å¾ˆå®¹æ˜“å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">function downloadOneSync(urls) &#123;</span><br><span class="line">	for(var i = 0, n = urls.length; i &lt; n; i++) &#123;</span><br><span class="line">		try &#123;</span><br><span class="line">			return downloadSync(urls[i]);</span><br><span class="line">		&#125; catch(e) &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	throw new Error(&quot;all downloads failed&quot;);</span><br><span class="line">&#125;</span><br><span class="line">å¦‚æœè°ƒç”¨downloadAsyncçš„è¯ä¼šæ‰€æœ‰æ–‡ä»¶ä¸€èµ·ä¸‹è½½æ²¡æœ‰é¡ºåºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿™æ ·åšåœ¨æ¯ä¸ªå›è°ƒç»“æŸè°ƒç”¨è‡ªèº«</span><br><span class="line"></span><br><span class="line">function downloadOneAsync(urls, onsuccess, onfailur) &#123;</span><br><span class="line">	var n = urls.length;</span><br><span class="line"></span><br><span class="line">	function tryNextURL(i) &#123;</span><br><span class="line">		if(i &gt;= n) &#123;</span><br><span class="line">			onfailur(&quot;all downloads failed&quot;);</span><br><span class="line">			return;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		downloadAsync(urls[i], onsuccess, function() &#123;</span><br><span class="line">			tryNextURL(i + 1);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	tryNextURL(0)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å±€éƒ¨å‡½æ•°tryNextURLæ˜¯ä¸€ä¸ªé€’å½’å‡½æ•°ã€‚å®ƒçš„å®ç°è°ƒç”¨äº†è‡ªèº«ã€‚ ç›®å‰å…¸å‹çš„JavaScriptç¯å¢ƒä¸­ä¸€ä¸ªé€’å½’å‡½æ•°è°ƒç”¨è‡ªèº«å¤šæ¬¡ä¼šå¯¼è‡´å¤±è´¥ã€‚<br>å› ä¸ºå½“ä¸€ä¸ªç¨‹åºæ‰§è¡Œæœ‰å¤ªå¤šçš„å‡½æ•°è°ƒç”¨ï¼Œå®ƒä¼šè€—å°½æ ˆç©ºé—´ï¼Œæœ€ç»ˆæŠ›å‡ºå¼‚å¸¸ã€‚è¿™ç§æƒ…å†µè¢«ç§°ä¸ºæ ˆæº¢å‡ºã€‚</p>
<p>è¯¥ä¾‹å­è°ƒç”¨100000æ¬¡ä¼šäº§ç”Ÿä¸€ä¸ªè¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function countdown(n) &#123;</span><br><span class="line">	if(n === 0) &#123;</span><br><span class="line">		return &quot;done&quot;;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		return countdown(n -1);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¼‚æ­¥æ“ä½œä¸éœ€è¦ç­‰å¾…é€’å½’å›è°ƒè¿”å›åæ‰è¿”å›ï¼Œè°ƒç”¨æ ˆä¸å›æœ‰åä¸‡ä¸ªå‡½æ•°åœ¨ç­‰å¾…ã€‚æ¯æ¬¡æœ‰è¿›æœ‰å‡ºåªè°ƒç”¨ä¸€ä¸ªã€‚</p>
<ul>
<li>å¾ªç¯ä¸èƒ½æ˜¯å¼‚æ­¥çš„</li>
<li>ä½¿ç”¨é€’å½’å‡½æ•°åœ¨äº‹ä»¶å¾ªç¯çš„å•ç‹¬è½®æ¬¡ä¸­æ‰§è¡Œè¿­ä»£</li>
<li>åœ¨äº‹ä»¶å¾ªç¯çš„å•ç‹¬è½®æ¬¡ä¸­æ‰§è¡Œé€’å½’ï¼Œå¹¶ä¸ä¼šå¯¼è‡´æ ˆæº¢å‡º</li>
</ul>
<h2 id="ä¸è¦åœ¨è®¡ç®—æ—¶é˜»å¡äº‹ä»¶é˜Ÿåˆ—"><a href="#ä¸è¦åœ¨è®¡ç®—æ—¶é˜»å¡äº‹ä»¶é˜Ÿåˆ—" class="headerlink" title="ä¸è¦åœ¨è®¡ç®—æ—¶é˜»å¡äº‹ä»¶é˜Ÿåˆ—"></a>ä¸è¦åœ¨è®¡ç®—æ—¶é˜»å¡äº‹ä»¶é˜Ÿåˆ—</h2><p>å¦‚æœä½ çš„ç¨‹åºéœ€è¦æ‰§è¡Œä»£ä»·é«˜æ˜‚çš„è®¡ç®—ä½ è¯¥æ€ä¹ˆåŠï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨æƒ³Webå®¢æˆ·ç«¯å¹³å°çš„Worker APIè¿™æ ·çš„å¹¶å‘æœºåˆ¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var ai = new Worker(&#x27;ai.js&#x27;);</span><br><span class="line"></span><br><span class="line">var userMove = /* *** */;</span><br><span class="line"></span><br><span class="line">ai.postMessage(JSON.stringify(&#123;</span><br><span class="line">	userMOve: userMove</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ai.onmessage = function(event) &#123;</span><br><span class="line">	executeMove(JSON.parse(event.data).computerMove);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„çº¿ç¨‹ç‹¬ç«‹çš„äº‹ä»¶é˜Ÿåˆ—çš„å¹¶å‘æ‰§è¡Œçº¿ç¨‹ã€‚è¯¥workeræ˜¯ä¸€ä¸ªå®Œå…¨éš”ç¦»çš„çŠ¶æ€â€“æ²¡æœ‰ä»»ä½•åº”ç”¨ç¨‹åºå¯¹è±¡çš„ç›´æ¥è®¿é—®ã€‚ä½†æ˜¯ï¼Œåº”ç”¨ç¨‹åºäºworkerä¹‹é—´å¯ä»¥åŠŸè¿‡å‘é€å½¢å¼ä¸ºå­—ç¬¦ä¸²çš„messageæ¥äº¤äº’ã€‚</p>
<ul>
<li>é¿å…åœ¨ä¸»äº‹ä»¶é˜Ÿåˆ—ä¸­æ‰§è¡Œä»£ä»·é«˜æ˜‚çš„è®¡ç®—</li>
<li>åœ¨æ”¯æŒWorker APIçš„å¹³å°ï¼Œè¯¥APIå¯ä»¥ç”¨æ¥åœ¨ä¸€ä¸ªç‹¬ç«‹çš„äº‹ä»¶é˜Ÿåˆ—ä¸­è¿è¡Œé•¿è®¡ç®—ç¨‹åºã€‚</li>
<li>åœ¨Worker APIä¸å¯ç”¨æ´»ä»£ä»·é«˜æ˜‚çš„ç¯å¢ƒä¸­ï¼Œè€ƒè™‘å°†è®¡ç®—ç¨‹åºåˆ†è§£åˆ°äº‹ä»¶å¾ªç¯çš„å¤šä¸ªè½®æ¬¡ä¸­</li>
</ul>
<h2 id="ä½¿ç”¨è®¡æ•°å™¨æ¥æ‰§è¡Œå¹¶è¡Œæ“ä½œ"><a href="#ä½¿ç”¨è®¡æ•°å™¨æ¥æ‰§è¡Œå¹¶è¡Œæ“ä½œ" class="headerlink" title="ä½¿ç”¨è®¡æ•°å™¨æ¥æ‰§è¡Œå¹¶è¡Œæ“ä½œ"></a>ä½¿ç”¨è®¡æ•°å™¨æ¥æ‰§è¡Œå¹¶è¡Œæ“ä½œ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">function downloadAllAsync(urls, onsuccess, onerror) &#123;</span><br><span class="line"></span><br><span class="line">	var result = [], length = urls.length;</span><br><span class="line"></span><br><span class="line">	if(length === 0) &#123;</span><br><span class="line">		setTimeout(onsuccess.bind(null, result), 0);</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	urls.forEach(function(url) &#123;</span><br><span class="line">		downloadAsync(url, function(rext) &#123;</span><br><span class="line">			if(result) &#123;</span><br><span class="line">				result.push(text);</span><br><span class="line">				if(result.length === urls.length) &#123;</span><br><span class="line">					onsuccess(result);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, function(error) &#123;</span><br><span class="line">			if(result) &#123;</span><br><span class="line">				result = null;</span><br><span class="line">				onerror(error);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¿™æ®µä»£ç æœ‰ä¸ªé”™è¯¯</span><br><span class="line"></span><br><span class="line">var filenames = [</span><br><span class="line">	&quot;huge.txt&quot;,</span><br><span class="line">	&quot;tiny.txt&quot;,</span><br><span class="line">	&quot;medium.txt&quot;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">downloadAllAsync(filenames, function(files) &#123;</span><br><span class="line">	console.log(&quot;Huge file: &quot; + files[0].length); // tiny</span><br><span class="line">	console.log(&quot;Tiny file: &quot; + files[0].length); // medium</span><br><span class="line">	console.log(&quot;Medium file: &quot; + files[0].length); // huge</span><br><span class="line">&#125;, function(error) &#123;</span><br><span class="line">	console.log(&quot;Error : &quot; + error);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸‹è½½æ–‡ä»¶çš„é¡ºåºå¹¶ä¸å¯æ§ï¼Œå› ä¸ºæ–‡ä»¶æ˜¯å¹¶è¡Œä¸‹è½½çš„ã€‚ è°ƒç”¨è€…æ— æ³•æ‰¾å‡ºé‚£ä¸ªç»“æœå¯¹åº”å“ªä¸ªæ–‡ä»¶ï¼Œ ä¸Šé¢çš„ä¾‹å­å‡è®¾ç»“æœåˆè¾“å…¥æœ‰ç›¸åŒçš„é¡ºåºå…¶å®æ˜¯é”™è¯¯çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">function downloadAllAsync(urls, onsuccess, onerror) &#123;</span><br><span class="line"></span><br><span class="line">	var result = [], length = urls.length;</span><br><span class="line"></span><br><span class="line">	if(length === 0) &#123;</span><br><span class="line">		setTimeout(onsuccess.bind(null, result), 0);</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	urls.forEach(function(url, i) &#123;</span><br><span class="line">		downloadAsync(url, function(text) &#123;</span><br><span class="line">			if(result) &#123;</span><br><span class="line">				</span><br><span class="line">				result[i] = text;</span><br><span class="line">				if(result.length === urls.length) &#123;</span><br><span class="line">					onsuccess(result);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, function(error) &#123;</span><br><span class="line">			if(result) &#123;</span><br><span class="line">				result = null;</span><br><span class="line">				onerror(error);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>è¿™ä¸ªç‰ˆæœ¬ä¹Ÿæœ‰é—®é¢˜å¦‚æœå…ˆä¸‹è½½å®Œæˆçš„æ˜¯ç¬¬ä¸‰ä¸ªæ–‡ä»¶åˆ™ result[2] = text; é‚£ä¹ˆresultçš„é•¿åº¦ä¹Ÿæ˜¯3ï¼Œ åˆ™ç›´æ¥åœ¨ifæ¡ä»¶ä¸­è¿”å›ï¼Œç”¨æˆ·çš„successå›è°ƒå‡½æ•°å°†è¢«è¿‡æ—©è°ƒç”¨ï¼Œå…¶å‚æ•°ä¸ºä¸€ä¸ªä¸å®Œæ•´çš„ç»“æœæ•°ç»„ã€‚</p>
<p>æ‰€ä»¥æ­£ç¡®çš„æ–¹å¼åº”è¯¥æ˜¯è¿™æ ·</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function downloadAllAsync(urls, onsuccess, onerror) &#123;</span><br><span class="line"></span><br><span class="line">	var result = [], pending = urls.length;</span><br><span class="line"></span><br><span class="line">	if(pending === 0) &#123;</span><br><span class="line">		setTimeout(onsuccess.bind(null, result), 0);</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	urls.forEach(function(url, i) &#123;</span><br><span class="line">		downloadAsync(url, function(text) &#123;</span><br><span class="line">			if(result) &#123;</span><br><span class="line">			</span><br><span class="line">				result[i] = text;</span><br><span class="line">				pending--;</span><br><span class="line">				if(pending === 0) &#123;</span><br><span class="line">					onsuccess(result);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;, function(error) &#123;</span><br><span class="line">			if(result) &#123;</span><br><span class="line">				result = null;</span><br><span class="line">				onerror(error);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="ç»ä¸è¦åŒæ­¥çš„è°ƒç”¨å¼‚æ­¥çš„å›è°ƒå‡½æ•°"><a href="#ç»ä¸è¦åŒæ­¥çš„è°ƒç”¨å¼‚æ­¥çš„å›è°ƒå‡½æ•°" class="headerlink" title="ç»ä¸è¦åŒæ­¥çš„è°ƒç”¨å¼‚æ­¥çš„å›è°ƒå‡½æ•°"></a>ç»ä¸è¦åŒæ­¥çš„è°ƒç”¨å¼‚æ­¥çš„å›è°ƒå‡½æ•°</h2><p>åŠ å…¥ä¸‹è½½æ–‡ä»¶çš„ä¾‹å­æœ‰ä¸€ä¸ªç¼“å­˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">var cache = new Dict();</span><br><span class="line"></span><br><span class="line">function downloadCachingAsync(url, onsuccess, onerrur) &#123;</span><br><span class="line">	if(cache.has(url)) &#123;</span><br><span class="line">		onsuccess(cache.get(url));  // åŒæ­¥è°ƒç”¨</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return downloadAsync(url, function(file) &#123;</span><br><span class="line">		cache.set(url, file);</span><br><span class="line">		onsuccess(file);</span><br><span class="line">	&#125;, onerror);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">é€šå¸¸æƒ…å†µå¦‚æœå¯ä»¥å›ç«‹å³æä¾›æ•°æ®ï¼Œä½†è¿™æ”¹å˜äº†ç”¨æˆ·é¢„æœŸ</span><br><span class="line"></span><br><span class="line">downloadAsync(&quot;file.txt&quot;, function(file) &#123;</span><br><span class="line">	console.log(&quot;finished&quot;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&quot;starting&quot;);</span><br><span class="line"></span><br><span class="line">è¿™é‡ŒæŒ‰ç…§æˆ‘ä»¬é¢„æƒ³ å¯èƒ½å…ˆè¿”å› &quot;starting&quot; ç„¶å &quot;finished&quot;, ä½†æ˜¯ç”±äºåŒæ­¥è°ƒç”¨äº†å‡½æ•°ï¼Œ</span><br><span class="line">è¿™é‡Œå¦‚æœæ–‡ä»¶æœ‰ç¼“å­˜çš„è¯ å…ˆè¿”å›äº†&quot;finished&quot; ç„¶åæ‰æ˜¯ &quot;starting&quot;; è¿™ä¸æˆ‘ä»¬çš„é¢„æƒ³ä¸ç¬¦ã€‚</span><br><span class="line">æ‰€ä»¥æˆ‘ä»¬åº”è¯¥è¿™æ ·æ¥ä½¿ç”¨</span><br><span class="line"></span><br><span class="line">if(cache.has(url)) &#123;</span><br><span class="line">	var cached = cache.get(url);</span><br><span class="line">	setTimeout(onsuccess.bind(null, cached), 0);</span><br><span class="line">	return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="ä½¿ç”¨promiseæ¨¡å¼æ¸…æ´å¼‚æ­¥é€»è¾‘"><a href="#ä½¿ç”¨promiseæ¨¡å¼æ¸…æ´å¼‚æ­¥é€»è¾‘" class="headerlink" title="ä½¿ç”¨promiseæ¨¡å¼æ¸…æ´å¼‚æ­¥é€»è¾‘"></a>ä½¿ç”¨promiseæ¨¡å¼æ¸…æ´å¼‚æ­¥é€»è¾‘</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">downloadAsync(&quot;file.txt&quot;, function(file) &#123;</span><br><span class="line">	console.log(&quot;file : &quot; + file);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ç›¸æ¯”ä¹‹ä¸‹ï¼ŒåŸºäºpromiseçš„APIä¸æ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°</span><br><span class="line"></span><br><span class="line">var p = downloadP(&quot;file.txt&quot;);</span><br><span class="line"></span><br><span class="line">p.then(function(file) &#123;</span><br><span class="line">	console.log(&quot;file: &quot; + file);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promiseçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ–°çš„promise</span><br><span class="line"></span><br><span class="line">var fileP = downloadP(&quot;file.txt&quot;);</span><br><span class="line"></span><br><span class="line">var lengthP = fileP.then(function(file) &#123;</span><br><span class="line">	return file.length;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">lengthP.then(function(length) &#123;</span><br><span class="line">	console.log(&quot;length: &quot; + length);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>promiseé€šå¸¸æä¾›ç»™ä¸€ä¸ªå«åšwhençš„å·¥å…·å‡½æ•°ï¼Œæˆ–è€…join</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var filesP = join(downloadP(&quot;file1.txt&quot;),</span><br><span class="line">				downloadP(&quot;file2.txt&quot;),</span><br><span class="line">				downloadP(&quot;file3.txt&quot;));</span><br><span class="line"></span><br><span class="line">filesP.then(function(files) &#123;</span><br><span class="line">	// files[0]</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">var fileP1 = downloadP(&quot;file1.txt&quot;);</span><br><span class="line">var fileP2 = downloadP(&quot;file2.txt&quot;);</span><br><span class="line">var fileP3 = downloadP(&quot;file3.txt&quot;);</span><br><span class="line"></span><br><span class="line">when([fileP1, fileP2, fileP3], function(files) &#123;</span><br><span class="line">	console.log(&quot;file1: &quot; + files[0]);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨selectæˆ–chooseå·¥å…·å‡½æ•°å¯ä»¥ä½¿å‡ ä¸ªpromiseå½¼æ­¤ç«äº‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var filesP = select(downloadP(&quot;file1.txt&quot;),</span><br><span class="line">				downloadP(&quot;file2.txt&quot;),</span><br><span class="line">				downloadP(&quot;file3.txt&quot;));</span><br><span class="line"></span><br><span class="line">filesP.then(function(file) &#123;</span><br><span class="line">	//file</span><br><span class="line">	// è¿”å›å€¼æœ€å…ˆå®Œæˆä¸‹è½½çš„æ–‡ä»¶çš„promise</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>selectå‡½æ•°çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯æä¾›è¶…æ—¶æ¥ç»ˆæ­¢é•¿æ—¶é—´çš„æ“ä½œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var fileP = select(downloadP(&quot;file.txt&quot;), timeoutErrorP(2000));</span><br><span class="line"></span><br><span class="line">filep.then(function(file) &#123;</span><br><span class="line">	console.log(&quot;file: &quot; + file);</span><br><span class="line">&#125;, function(error) &#123;</span><br><span class="line">	console.log(&quot;I/O error or timeout: &quot; + error);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>toshiba</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://sdongzhi.com/2018/09/28/read-book-effective-ten/" title="Effective JavaScript (å)">https://sdongzhi.com/2018/09/28/read-book-effective-ten/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> è®¸å¯åè®®ã€‚</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2018/09/28/read-book-effective-nine/" rel="prev" title="Effective JavaScript (ä¹)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Effective JavaScript (ä¹)</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2018/09/25/read-book-effective-eight/" rel="next" title="Effective JavaScript (å…«)"><span class="post-nav-text">Effective JavaScript (å…«)</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>è‹¥æ‚¨æƒ³åŠæ—¶å¾—åˆ°å›å¤æé†’ï¼Œå»ºè®®è·³è½¬ GitHub Issues è¯„è®ºã€‚</span><br></div><div id="disqus_thread"></div><script>const disqusConfig = function() {
  this.page.url = "https://sdongzhi.com/2018/09/28/read-book-effective-ten/"; // Replace PAGE_URL with your page's canonical URL variable
  this.page.identifier = "2018/09/28/read-book-effective-ten/"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  this.page.title = "Effective JavaScript (å)";
};
function loadDisqus() {
  // here we will only load the disqus <script> if not already loaded
  if (!window.DISQUS) {
    (function() {
      // DON'T EDIT BELOW THIS LINE
      const d = document,
        s = d.createElement("script");
      s.src = "https://IORI.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
  // if disqus <script> is already loaded, we just reset disqus the right way
  // see https://help.disqus.com/developer/using-disqus-on-ajax-sites
  else {
    DISQUS.reset({
      reload: true,
      config: function() {
        this.page.identifier = disqusConfig.page.identifier;
        this.page.url = disqusConfig.page.url;
      },
    });
  }
}</script><script src="/js/comments/disqus.js"></script></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2017 â€“ 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> å¤šå¼—æœ—æ˜å“¥</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div></div><!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/hexo-tag-common@latest/js/index.js"></script><!-- hexo injector body_end end --></body></html>