<!DOCTYPE html><html lang="zh-CN"><head><!-- hexo injector head_begin start --><link href="https://cdn.jsdelivr.net/npm/hexo-tag-common@latest/css/index.css" rel="stylesheet"/><!-- hexo injector head_begin end --><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="å¤šå¼—æœ—æ˜å“¥"><meta name="copyright" content="å¤šå¼—æœ—æ˜å“¥"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>Effective JavaScript (å…«) | å”å‰è¯ƒå¾·çš„å°ç«™</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" href="https://cdn.darknights.cn/assets/images/favicon.ico"><link rel="mask-icon" href="https://cdn.darknights.cn/assets/images/favicon.ico" color="#0078E7"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"sdongzhi.com","root":"/","title":"å”å‰è¯ƒå¾·çš„å°ç«™","version":"1.6.2","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"æœç´¢...","empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹: ${query}","hits":"æ‰¾åˆ° ${hits} æ¡ç»“æœ","hits_time":"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"algolia":{"appID":"ZH3RNMJ8TX","apiKey":"d3c4e9cb3d4b25b901414d257a20d970","indexName":"Pages","hits":{"per_page":8}},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="alternate" href="/atom.xml" title="å”å‰è¯ƒå¾·çš„å°ç«™" type="application/atom+xml"><link rel="stylesheet" href="/styles/custom.css"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=UA-107257239-1"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-107257239-1');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><meta name="description" content="ä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹æ„é€ è½»é‡çº§çš„å­—å…¸12345678910var dict &#x3D; &amp;#123; alice: 34, bob: 24, chris: 62 &amp;#125;;var people &#x3D; [];for(var name in dict) &amp;#123;	people.push(name + &quot;: &quot; + dict[name]);&amp;#125;people; &#x2F;&#x2F; [&amp;q">
<meta property="og:type" content="article">
<meta property="og:title" content="Effective JavaScript (å…«)">
<meta property="og:url" content="https://sdongzhi.com/2018/09/25/read-book-effective-eight/index.html">
<meta property="og:site_name" content="å”å‰è¯ƒå¾·çš„å°ç«™">
<meta property="og:description" content="ä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹æ„é€ è½»é‡çº§çš„å­—å…¸12345678910var dict &#x3D; &amp;#123; alice: 34, bob: 24, chris: 62 &amp;#125;;var people &#x3D; [];for(var name in dict) &amp;#123;	people.push(name + &quot;: &quot; + dict[name]);&amp;#125;people; &#x2F;&#x2F; [&amp;q">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-09-25T00:00:00.000Z">
<meta property="article:modified_time" content="2021-09-26T09:54:12.689Z">
<meta property="article:author" content="å¤šå¼—æœ—æ˜å“¥">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="è¯»ä¹¦æ€»ç»“">
<meta name="twitter:card" content="summary"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="æ–‡ç« ç›®å½•"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="ç«™ç‚¹æ¦‚è§ˆ"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="å¤šå¼—æœ—æ˜å“¥"><img width="96" loading="lazy" src="/images/avatar.jpeg" alt="å¤šå¼—æœ—æ˜å“¥"><span class="site-author-status" title="Looking for dawn.">ğŸŒ‘</span></a><div class="site-author-name"><a href="/about/">å¤šå¼—æœ—æ˜å“¥</a></div><a class="site-name" href="/about/site.html">å”å‰è¯ƒå¾·çš„å°ç«™</a><sub class="site-subtitle"></sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="é¦–é¡µ"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="å½’æ¡£"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">54</span></a></div><div class="site-state-item"><a href="/categories/" title="åˆ†ç±»"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">19</span></a></div><div class="site-state-item"><a href="/tags/" title="æ ‡ç­¾"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">36</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-clipboard-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rss-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/IORI20091101" title="GitHub" target="_blank" style="color:#6e5494"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://twitter.com/iori20091101" title="Twitter" target="_blank" style="color:#1da1f2"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-twitter-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://t.me/donduffy" title="Telegram Channel" target="_blank" style="color:#0088CC"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-telegram-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:sdzzlyjy@gmail.com" title="E-Mail" target="_blank" style="color:#8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.link" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-train-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Object%E7%9A%84%E7%9B%B4%E6%8E%A5%E5%AE%9E%E4%BE%8B%E6%9E%84%E9%80%A0%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%9A%84%E5%AD%97%E5%85%B8"><span class="toc-number">1.</span> <span class="toc-text">ä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹æ„é€ è½»é‡çº§çš„å­—å…¸</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8null%E5%8E%9F%E5%9E%8B%E4%BB%A5%E9%98%B2%E6%AD%A2%E5%8E%9F%E5%9E%8B%E6%B1%A1%E6%9F%93"><span class="toc-number">2.</span> <span class="toc-text">ä½¿ç”¨nullåŸå‹ä»¥é˜²æ­¢åŸå‹æ±¡æŸ“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8hasOwnProperty%E6%96%B9%E6%B3%95%E9%81%BF%E5%85%8D%E5%8E%9F%E5%9E%8B%E6%B1%A1%E6%9F%93"><span class="toc-number">3.</span> <span class="toc-text">ä½¿ç”¨hasOwnPropertyæ–¹æ³•é¿å…åŸå‹æ±¡æŸ“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84%E8%80%8C%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8%E5%AD%97%E5%85%B8%E6%9D%A5%E5%AD%98%E5%82%A8%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88"><span class="toc-number">4.</span> <span class="toc-text">ä½¿ç”¨æ•°ç»„è€Œä¸è¦ä½¿ç”¨å­—å…¸æ¥å­˜å‚¨æœ‰åºé›†åˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9D%E4%B8%8D%E8%A6%81%E5%9C%A8Object-prototype%E4%B8%AD%E5%A2%9E%E5%8A%A0%E5%8F%AF%E6%9E%9A%E4%B8%BE%E5%B1%9E%E6%80%A7"><span class="toc-number">5.</span> <span class="toc-text">ç»ä¸è¦åœ¨Object.prototypeä¸­å¢åŠ å¯æšä¸¾å±æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%BF%E5%85%8D%E5%9C%A8%E6%9E%9A%E4%B8%BE%E6%9C%9F%E9%97%B4%E4%BF%AE%E6%94%B9%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.</span> <span class="toc-text">é¿å…åœ¨æšä¸¾æœŸé—´ä¿®æ”¹å¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E8%BF%AD%E4%BB%A3%E4%BC%98%E5%85%88%E4%BD%BF%E7%94%A8for%E5%BE%AA%E7%8E%AF%E8%80%8C%E4%B8%8D%E6%98%AFfor-in"><span class="toc-number">7.</span> <span class="toc-text">æ•°ç»„è¿­ä»£ä¼˜å…ˆä½¿ç”¨forå¾ªç¯è€Œä¸æ˜¯for...in</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E6%96%B9%E6%B3%95%E7%94%B1%E4%BA%8E%E5%BE%AA%E7%8E%AF"><span class="toc-number">8.</span> <span class="toc-text">è¿­ä»£æ–¹æ³•ç”±äºå¾ªç¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E7%B1%BB%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E4%B8%8A%E5%A4%8D%E7%94%A8%E9%80%9A%E7%94%A8%E7%9A%84%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95"><span class="toc-number">9.</span> <span class="toc-text">åœ¨ç±»æ•°ç»„å¯¹è±¡ä¸Šå¤ç”¨é€šç”¨çš„æ•°ç»„æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%AD%97%E9%9D%A2%E9%87%8F%E4%BC%98%E4%BA%8E%E6%95%B0%E7%BB%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">10.</span> <span class="toc-text">æ•°ç»„å­—é¢é‡ä¼˜äºæ•°ç»„æ„é€ å‡½æ•°</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://sdongzhi.com/2018/09/25/read-book-effective-eight/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="å¤šå¼—æœ—æ˜å“¥"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="å”å‰è¯ƒå¾·çš„å°ç«™"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Effective JavaScript (å…«)<a class="post-edit-link" href="https://github.com/YunYouJun/yunyoujun.github.io/tree/hexo/source/_posts/read-book-effective-eight.md" target="_blank" title="ç¼–è¾‘" rel="noopener"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-edit-line"></use></svg></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="åˆ›å»ºæ—¶é—´ï¼š2018-09-25 00:00:00" itemprop="dateCreated datePublished" datetime="2018-09-25T00:00:00+00:00">2018-09-25</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-09-26 09:54:12" itemprop="dateModified" datetime="2021-09-26T09:54:12+00:00">2021-09-26</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="æœ¬æ–‡å­—æ•°"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="æœ¬æ–‡å­—æ•°">4.9k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="é˜…è¯»æ—¶é•¿"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="é˜…è¯»æ—¶é•¿">21m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E8%AF%BB%E4%B9%A6%E6%80%BB%E7%BB%93/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">è¯»ä¹¦æ€»ç»“</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/javascript/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">javascript</span></a><a class="tag-item" href="/tags/%E8%AF%BB%E4%B9%A6%E6%80%BB%E7%BB%93/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">è¯»ä¹¦æ€»ç»“</span></a></span></div><div class="post-author"><span class="author-name">toshiba</span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h2 id="ä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹æ„é€ è½»é‡çº§çš„å­—å…¸"><a href="#ä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹æ„é€ è½»é‡çº§çš„å­—å…¸" class="headerlink" title="ä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹æ„é€ è½»é‡çº§çš„å­—å…¸"></a>ä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹æ„é€ è½»é‡çº§çš„å­—å…¸</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var dict = &#123; alice: 34, bob: 24, chris: 62 &#125;;</span><br><span class="line"></span><br><span class="line">var people = [];</span><br><span class="line"></span><br><span class="line">for(var name in dict) &#123;</span><br><span class="line">	people.push(name + &quot;: &quot; + dict[name]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">people; // [&quot;alice: 34&quot;, &quot;bob: 24&quot;, &quot;chris: 62&quot;];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„å­—å…¸ç±»ä¼šæ€æ ·å‘¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function NaiveDict() &#123;&#125;</span><br><span class="line"></span><br><span class="line">NaiveDict.prototype.count = function() &#123;</span><br><span class="line">	var i = 0;</span><br><span class="line">	for(var name in this) &#123;</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return i;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">NaiveDict.prototype.toString = function() &#123;</span><br><span class="line">	return &quot;[object NaiveDict]&quot;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var dict = new NaiveDict();</span><br><span class="line"></span><br><span class="line">dict.alice = 34;</span><br><span class="line">dict.bob = 24;</span><br><span class="line">dict.chris = 62;</span><br><span class="line"></span><br><span class="line">dict.count(); // 5</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œcountä¼šæšä¸¾å‡ºæ‰€æœ‰çš„å±æ€§åŒ…æ‹¬äº†toString å’Œcount,è€Œä¸ä»…ä»…æ˜¯æˆ‘ä»¬éœ€è¦çš„å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var dict = new Array();</span><br><span class="line"></span><br><span class="line">dict.alice = 34;</span><br><span class="line">dict.bob = 24;</span><br><span class="line">dict.chris = 62;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™æ ·ä¹Ÿä¼šæœ‰é—®é¢˜ï¼Œä»£ç å¯¹åŸå‹æ±¡æŸ“å¾ˆè„†å¼±ï¼Œåº”ç”¨ç¨‹åºçš„å…¶ä»–åº“æœ‰å¯èƒ½ä¼šæ‰“çŒ´å­è¡¥ä¸ï¼Œæ¯”å¦‚</p>
<blockquote>
<p>åŸå‹æ±¡æŸ“æ˜¯æŒ‡å½“æšä¸¾å­—å…¸çš„æ¡ç›®æ—¶ï¼ŒåŸå‹å¯¹è±¡ä¸­çš„ä¸€äº›å±æ€§å¯èƒ½ä¼šå¯¼è‡´å‡ºç°ä¸€äº›ä¸æœŸæœ›çš„å±æ€§ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.first = function() &#123;</span><br><span class="line">	return this[0];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Array.prototype.last = function() &#123;</span><br><span class="line">	return this[1];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var names = [];</span><br><span class="line">for(var name in dict) &#123;</span><br><span class="line">	names.push(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">names; [&quot;alice&quot;, &quot;bob&quot;, &quot;chris&quot;, &quot;first&quot;, &quot;last&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ä½¿ç”¨ <code>new Object() </code>å¯èƒ½ä¼šé¢ä¸´åŒæ ·çš„é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ <code>&#123;&#125;</code>çš„æ–¹å¼ä¼šæ›´å¥½, è™½ç„¶ä¸èƒ½ä¿è¯å¯¹äºåŸå‹æ±¡æŸ“æ—¶å®‰å…¨çš„ï¼Œä»»ä½•äººä»ç„¶èƒ½å¢åŠ å±æ€§åˆ°Object.prototypeï¼Œä½†æ˜¯é£é™©å¯ä»¥é™ä½åˆ°ä»…ä»…å±€é™äºObject.prototype</p>
<ul>
<li>åšæŒä½¿ç”¨Objectçš„ç›´æ¥å®ä¾‹åŸåˆ™å¯ä»¥ä½¿forâ€¦inå¾ªç¯æ‘†è„±åŸå‹æ±¡æŸ“çš„å½±å“</li>
<li>ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ„å»ºè½»é‡çº§å­—å…¸</li>
</ul>
<h2 id="ä½¿ç”¨nullåŸå‹ä»¥é˜²æ­¢åŸå‹æ±¡æŸ“"><a href="#ä½¿ç”¨nullåŸå‹ä»¥é˜²æ­¢åŸå‹æ±¡æŸ“" class="headerlink" title="ä½¿ç”¨nullåŸå‹ä»¥é˜²æ­¢åŸå‹æ±¡æŸ“"></a>ä½¿ç”¨nullåŸå‹ä»¥é˜²æ­¢åŸå‹æ±¡æŸ“</h2><p>é˜²æ­¢åŸå‹æ±¡æŸ“çš„æœ€ç®€å•çš„æ–¹å¼ä¹‹ä¸€å°±æ˜¯ä¸€å¼€å§‹å°±ä¸ä½¿ç”¨åŸå‹ã€‚ä½†æ˜¯ES5å‘å¸ƒä¹‹å‰å¹¶æ²¡æœ‰ä¸€ä¸ªæ ‡å‡†çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªç©ºåŸå‹çš„æ–°å¯¹è±¡ã€‚ä½ å¯èƒ½ä¼šè¿™æ ·åš</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function C() &#123; &#125;</span><br><span class="line"></span><br><span class="line">C.prototype = null;</span><br><span class="line"></span><br><span class="line">var o = new C();</span><br><span class="line"></span><br><span class="line">Object.getPrototypeOf(o) === null; // false</span><br><span class="line">Object.getPrototypeOf(o) === Object.prototype // true</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// ES5ä¹‹ååº”è¯¥è¿™æ ·åš</span><br><span class="line">var x = Object.create(null);</span><br><span class="line"></span><br><span class="line">Object.getPrototypeOf(o) === null; // true</span><br><span class="line"></span><br><span class="line">åœ¨ä¸æ”¯æŒObject.createçš„JavaScriptç¯å¢ƒä¸­ç‰¹æ®Šå¯¹è±¡__proto__æä¾›äº†å¯¹å¯¹è±¡å†…éƒ¨åŸå‹é“¾çš„è¯»å†™è®¿é—®</span><br><span class="line"></span><br><span class="line">var x = &#123; __proto__: null &#125;;</span><br><span class="line"></span><br><span class="line">x instanceof Object;  // false;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒç§è²Œä¼¼æ›´æ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰äº†Object.createå‡½æ•°åï¼ŒObject.createæ˜¯æ›´å€¼å¾—æ¨èçš„æ–¹å¼ã€‚</p>
<ul>
<li>åœ¨ES5ä¸­è¦ä½¿ç”¨Object.create(null)åˆ›å»ºè‡ªç”±åŸå‹çš„ç©ºå¯¹è±¡æ˜¯ä¸å¤ªå®¹æ˜“è¢«æ±¡æŸ“çš„ã€‚</li>
<li>åœ¨ä¸€äº›è€ç¯å¢ƒä¸­è€ƒè™‘ä½¿ç”¨{ <strong>proto</strong>: null }ï¼Œ ä½†æ˜¯å®ƒæ—¢ä¸æ˜¯æ ‡å‡†çš„ä¹Ÿä¸æ˜¯å¯ç§»æ¤çš„è¿˜æœ‰å¯èƒ½åœ¨æœªæ¥è¢«åˆ é™¤</li>
<li>ç»å¯¹ä¸è¦ä½¿ç”¨__proto__ä½œä¸ºå­—å…¸ä¸­çš„key</li>
</ul>
<h2 id="ä½¿ç”¨hasOwnPropertyæ–¹æ³•é¿å…åŸå‹æ±¡æŸ“"><a href="#ä½¿ç”¨hasOwnPropertyæ–¹æ³•é¿å…åŸå‹æ±¡æŸ“" class="headerlink" title="ä½¿ç”¨hasOwnPropertyæ–¹æ³•é¿å…åŸå‹æ±¡æŸ“"></a>ä½¿ç”¨hasOwnPropertyæ–¹æ³•é¿å…åŸå‹æ±¡æŸ“</h2><p>JavaScriptçš„å¯¹è±¡æ“ä½œæ€»æ˜¯ä»¥ç»§æ‰¿çš„æ–¹å¼å·¥ä½œï¼Œå³ä½¿ä¸€ä¸ªç©ºçš„å¯¹è±¡å­—é¢é‡ä¹Ÿç»§æ‰¿äº†Object.prototypeçš„å¤§é‡å±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var dict = &#123;&#125;</span><br><span class="line">&quot;alice&quot; in dict; //false;</span><br><span class="line">&quot;bob&quot; in dict; //false;</span><br><span class="line">&quot;chris&quot; in dict; //false;</span><br><span class="line"></span><br><span class="line">// toString å’ŒvalueOfæ–¹æ³•ç»§æ‰¿è‡ªObject.prototype</span><br><span class="line">&quot;toString&quot; in dict; //false;  </span><br><span class="line">&quot;valueOf&quot; in dict; //false;</span><br></pre></td></tr></table></figure>
<p>å¹¸è¿çš„æ˜¯Object.hasOwnPropertyæ–¹æ³•å¯ä»¥ç”¨æ¥åˆ¤æ–­å±æ€§æ˜¯å¦ç»§æ‰¿è‡ªåŸå‹å¯¹è±¡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dict.hasOwnProperty(&quot;alice&quot;);     // false</span><br><span class="line">dict.hasOwnProperty(&quot;toString&quot;);  // false</span><br><span class="line">dict.hasOwnProperty(&quot;valueOf&quot;);   // false</span><br></pre></td></tr></table></figure>
<p>ä¸å¹¸çš„æ˜¯æˆ‘ä»¬æ²¡æœ‰å®Œå…¨è§£å†³é—®é¢˜ï¼Œå½“è°ƒç”¨dict.hasOwnPropertyæ—¶ï¼Œæˆ‘ä»¬è¯·æ±‚è°ƒæŸ¥å¯¹è±¡çš„hasOwnPropertyæ–¹æ³•ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•ä¼šç®€å•çš„ç»§æ‰¿è‡ªObject.propertyå¯¹è±¡ï¼Œç„¶è€Œå¦‚æœå­—å…¸ä¸­å­˜å‚¨ä¸€ä¸ªåŒåçš„æ¡ç›®æ—¶ï¼Œé‚£ä¹ˆåŸå‹ä¸­çš„hasOwnPropertyæ–¹æ³•ä¸èƒ½å†è¢«æ•è·åˆ°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict.hasOwnProperty = 10;</span><br><span class="line"></span><br><span class="line">dict.hasOwnProperty(&quot;alice&quot;);</span><br><span class="line">// error dict.hasOwnProperty is not a function</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯æœ‰å¯èƒ½çš„,æœ€å®‰å…¨çš„æ–¹å¼å°±æ˜¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var hasOwn = Object.prototype.hasOwnProperty;</span><br><span class="line">æˆ–è€…</span><br><span class="line">var hasOwn = &#123;&#125;.hasOwnProperty;</span><br><span class="line"></span><br><span class="line">hasOwn.call(dict, &quot;alice&quot;);</span><br></pre></td></tr></table></figure>
<p>ä¸ç®¡èµ·æ¥æ”¶è€…çš„hasOwnPropertyæ–¹æ³•æ˜¯å¦è¢«è¦†ç›–ï¼Œè¯¥æ–¹æ³•éƒ½èƒ½å·¥ä½œã€‚</p>
<p>æˆ‘ä»¬å¼€å§‹åˆ›å»ºä¸€ä¸ªå­—å…¸ç±» ç‰ˆæœ¬ä¸€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">function Dict(elements) &#123;</span><br><span class="line">	this.elements = elements || &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dict.prototype.has = function(key) &#123;</span><br><span class="line">	return &#123;&#125;.hasOwnProperty.call(this.elements, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dict.prototype.get = function(key) &#123;</span><br><span class="line">	return this.has(key) ? this.elements[key] : undefined;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dict.prototype.set = function(key, val) &#123;</span><br><span class="line">	this.elements[key] = val;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dict.prototype.remove = function(key) &#123;</span><br><span class="line">	delete this.elements[key];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var dict = new Dict(&#123;</span><br><span class="line">	alice: 34,</span><br><span class="line">	bob: 24,</span><br><span class="line">	chris: 62</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">dict.has(&quot;alice&quot;);    // true</span><br><span class="line">dict.get(&quot;bob&quot;);      // 24</span><br><span class="line">dict.has(&quot;valueOf&quot;)   //false</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸€äº›JavaScriptçš„ç¯å¢ƒä¸­ï¼Œç‰¹æ®Šçš„å±æ€§å__proto__å¯èƒ½å¯¼è‡´è‡ªèº«çš„æ±¡æŸ“é—®é¢˜__proto__å±æ€§åªæ˜¯ç®€å•çš„ç»§æ‰¿Object.prototype,æ‰€ä»¥æˆ‘ä»¬çš„ä¾‹å­ä¼šæœ‰ä¸€ä¸ªé—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var dict = new Dict();</span><br><span class="line">dict.has(&quot;__proto__&quot;); // ?</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹å¯èƒ½ä¼šæœ‰ä¸åŒçš„ç»“æœï¼Œæ‰€ä»¥ä¸ºäº†è¾¾åˆ°æœ€å¤§çš„å¯ç§»æ¤æ€§å’Œå®‰å…¨æ€§ï¼Œä¾¿æœ‰äº†ä¸‹é¢æ›´å¤æ‚ä½†æ˜¯æ›´å®‰å…¨çš„å®ç°<br>è¿™é‡Œæ£€æµ‹åˆ°__proto__çš„å¯ä»¥ é‡æ–°è®¾ç½®ä¸€ä¸ªæ–°å±æ€§ä½œä¸ºå®ä¾‹å¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œéšå¯¹è±¡è€Œåœ¨ä½†æ˜¯ä¸ä¼šå»è®¾ç½®å¯¹è±¡çš„__proto__</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">function Dict(elements) &#123;</span><br><span class="line">	this.elements = elements || &#123;&#125;;</span><br><span class="line">	this.hasSpecialProto = false;</span><br><span class="line">	this.specialProto = undefined;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dict.prototype.has = function(key) &#123;</span><br><span class="line">	if(key === &quot;__proto__&quot;) &#123; </span><br><span class="line">		return this.hasSpecialProto;</span><br><span class="line">	&#125;</span><br><span class="line">	return &#123;&#125;.hasOwnProperty.call(this.elements, key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dict.prototype.get = function(key) &#123;</span><br><span class="line">	if(key === &quot;__proto__&quot;) &#123; </span><br><span class="line">		return this.specialProto;</span><br><span class="line">	&#125;</span><br><span class="line">	return this.has(key) ? this.elements[key] : undefined;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dict.prototype.set = function(key, val) &#123;</span><br><span class="line">	if(key === &quot;__proto__&quot;) &#123;</span><br><span class="line">		this.hasSpecialProto = true;</span><br><span class="line"></span><br><span class="line">		this.specialProto = val;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		this.elements[key] = val;	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dict.prototype.remove = function(key) &#123;</span><br><span class="line">	if(key === &quot;__proto__&quot;) &#123;</span><br><span class="line">		this.hasSpecialProto = false;</span><br><span class="line">		this.sepcialProto = undefined;</span><br><span class="line">	&#125; else &#123;</span><br><span class="line">		delete this.elements[key];	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var dict = new Dict(&#123;</span><br><span class="line">	alice: 34,</span><br><span class="line">	bob: 24,</span><br><span class="line">	chris: 62</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">dict.has(&quot;alice&quot;);    // true</span><br><span class="line">dict.get(&quot;bob&quot;);      // 24</span><br><span class="line">dict.has(&quot;valueOf&quot;)   //false</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨æ•°ç»„è€Œä¸è¦ä½¿ç”¨å­—å…¸æ¥å­˜å‚¨æœ‰åºé›†åˆ"><a href="#ä½¿ç”¨æ•°ç»„è€Œä¸è¦ä½¿ç”¨å­—å…¸æ¥å­˜å‚¨æœ‰åºé›†åˆ" class="headerlink" title="ä½¿ç”¨æ•°ç»„è€Œä¸è¦ä½¿ç”¨å­—å…¸æ¥å­˜å‚¨æœ‰åºé›†åˆ"></a>ä½¿ç”¨æ•°ç»„è€Œä¸è¦ä½¿ç”¨å­—å…¸æ¥å­˜å‚¨æœ‰åºé›†åˆ</h2><p>JavaScriptå¯¹è±¡æ˜¯ä¸€ä¸ªæ— åºé›†åˆ,ECMAScriptæ ‡å‡†å¹¶æœªè§„å®šå±æ€§å­˜å‚¨çš„ä»»ä½•ç‰¹å®šé¡ºåºï¼Œç”šè‡³å¯¹äºæšä¸¾å¯¹è±¡ä¹Ÿæœªæ¶‰åŠã€‚è¿™å°†ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œ<code>for...in</code>å¾ªç¯ä¼šæŒ‘é€‰ä¸€ä¸ªç‰¹å®šé¡ºåºæ¥æšä¸¾å¯¹è±¡å±æ€§.æ¯”å¦‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">function report(highScores) &#123;</span><br><span class="line">	var result = &quot;&quot;;</span><br><span class="line">	var i = 1;</span><br><span class="line">	for(var name in highScores) &#123;</span><br><span class="line">		result += i + &quot; . &quot; + name + &quot; : &quot; + highScores[name] + &#x27;\n&#x27;;</span><br><span class="line"></span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">report([&#123;</span><br><span class="line">		name: &quot;Hank&quot;,</span><br><span class="line">		points: 1110100</span><br><span class="line">	&#125;,&#123;</span><br><span class="line">		name: &quot;Steve&quot;,</span><br><span class="line">		points: 1064500</span><br><span class="line">	&#125;,&#123;</span><br><span class="line">		name: &quot;Billy&quot;,</span><br><span class="line">		points: 1052000</span><br><span class="line">	&#125;]);</span><br><span class="line"></span><br><span class="line">ç”±äºä¸åŒçš„ç¯å¢ƒé€‰æ‹©ä¸åŒçš„é¡ºåºæ¥å­˜å‚¨å’Œæšä¸¾å¯¹è±¡å±æ€§ï¼Œæ‰€ä»¥è¿™ä¸ªå‡½æ•°å¾—åˆ°é¡ºåºæ··ä¹±çš„â€œæœ€é«˜åˆ†â€æŠ¥è¡¨</span><br></pre></td></tr></table></figure>
<p>è¯·è®°ä½ä½ çš„ç¨‹åºæ˜¯å¦ä»¥æ¥å¯¹è±¡æšä¸¾çš„é¡ºåºå¹¶ä¸æ€»æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œå¦‚æœæ²¡æœ‰åœ¨å¤šä¸ªJavaScriptç¯å¢ƒä¸­æµ‹è¯•è¿‡ä½ çš„ç¨‹åºï¼Œä½ ç”šè‡³å¯èƒ½ä¸å›æ³¨æ„åˆ°ç¨‹åºçš„è¡Œä¸ºå› ä¸ºä¸€ä¸ªforâ€¦inå¾ªç¯çš„ç¡®åˆ‡é¡ºåºè€Œè¢«æ”¹å˜ï¼Œå¯¹äºä¸Šé¢çš„ä¾‹å­éœ€è¦ä½¿ç”¨æ•°ç»„,é‚£ä¹ˆå®ƒå®Œå…¨å¯ä»¥å·¥ä½œåœ¨ä»»ä½•JavaScriptç¯å¢ƒä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">function report(highScores) &#123;</span><br><span class="line">	var result = &quot;&quot;;</span><br><span class="line">	var i = 1;</span><br><span class="line">	for(var i = 0, n = highScores.length; i &lt; n; i++) &#123;</span><br><span class="line">		var score = hightScores[i];</span><br><span class="line">		result += (i + 1) + &quot; . &quot; + score.name + &quot; : &quot; + score.points + &#x27;\n&#x27;;</span><br><span class="line"></span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">report([&#123;</span><br><span class="line">		name: &quot;Hank&quot;,</span><br><span class="line">		points: 1110100</span><br><span class="line">	&#125;,&#123;</span><br><span class="line">		name: &quot;Steve&quot;,</span><br><span class="line">		points: 1064500</span><br><span class="line">	&#125;,&#123;</span><br><span class="line">		name: &quot;Billy&quot;,</span><br><span class="line">		points: 1052000</span><br><span class="line">	&#125;]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªå¾®å¦™çš„é¡ºåºä»¥æ¥çš„å…¸å‹ä¾‹å­æ˜¯æµ®ç‚¹è¿ç®—ï¼Œ å‡è®¾ä¸€ä¸ªå¯¹è±¡ä½¿ç”¨<code>for...in</code> å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var ratings = &#123;</span><br><span class="line">	&quot;Good will Hunting&quot;: 0.8,</span><br><span class="line">	&quot;Mystic River&quot;: 0.7,</span><br><span class="line">	&quot;21&quot;: 0.6,</span><br><span class="line">	&quot;Doubt&quot;: 0.9</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">var total = 0, count = 0;</span><br><span class="line">for(var key in. ratings) &#123;</span><br><span class="line">	total += ratings[key];</span><br><span class="line">	count++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">total /= count;</span><br><span class="line"></span><br><span class="line">total; //?</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>äº‹å®è¯æ˜ï¼Œæµè¡Œçš„JavaScrtipç¯å¢ƒå®é™…ä¸Šä½¿ç”¨ä¸åŒçš„é¡ºåºæ‰§è¡Œè¿™ä¸ªå¾ªç¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ä¸€äº›ç¯å¢ƒè¿™æ ·è®¡ç®—</span><br><span class="line"></span><br><span class="line">(0.8 + 0.7 + 0.6 + 0.9) / 4  // 0.75</span><br><span class="line"></span><br><span class="line">è¿˜æœ‰ä¸€äº›ç¯å¢ƒå…ˆæšä¸¾æ½œåœ¨çš„æ•°ç»„ç´¢å¼•ï¼Œ21æ°å¥½æ˜¯ä¸€ä¸ªå¯è¡Œçš„æ•°ç»„ç´¢å¼•ï¼Œå®ƒé¦–å…ˆè¢«æšä¸¾ï¼Œå¯¼è‡´å¦‚ä¸‹ç»“æœ</span><br><span class="line"></span><br><span class="line">(0.6 + 0.8 + 0.7 + 0.9) / 4  // 0.7499999999999999</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ›´å¥½çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ä½¿ç”¨æ•´æ•°å€¼</span><br><span class="line"></span><br><span class="line">(8 + 7 + 6 + 9) / 4/ 10.  //0.75</span><br><span class="line"></span><br><span class="line">(6 + 8 + 7  + 9) / 4/ 10.  //0.75</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>é€šå¸¸å½“æ‰§è¡Œ<code>for...in</code> å¾ªç¯æ—¶åº”å½“æ—¶åˆ»å°å¿ƒï¼Œç¡®ä¿æ“ä½œè¡Œä¸ºä¸é¡ºåºæ— å…³ã€‚</p>
<h2 id="ç»ä¸è¦åœ¨Object-prototypeä¸­å¢åŠ å¯æšä¸¾å±æ€§"><a href="#ç»ä¸è¦åœ¨Object-prototypeä¸­å¢åŠ å¯æšä¸¾å±æ€§" class="headerlink" title="ç»ä¸è¦åœ¨Object.prototypeä¸­å¢åŠ å¯æšä¸¾å±æ€§"></a>ç»ä¸è¦åœ¨Object.prototypeä¸­å¢åŠ å¯æšä¸¾å±æ€§</h2><p><code>for...in</code>éå¸¸ä¾¿åˆ©ï¼Œç„¶è€Œå®ƒå¾ˆå®¹æ˜“å—åˆ°åŸå‹æ±¡æŸ“çš„å½±å“ã€‚ç›®å‰ä¸ºæ­¢<code>for...in</code>æœ€å¸¸è§çš„ç”¨æ³•æ˜¯æšä¸¾å­—å…¸ä¸­çš„å…ƒç´ ã€‚è¿™æš—ç¤ºç€å¦‚æœæƒ³å…è®¸å¯¹å­—å…¸å¯¹è±¡ä½¿ç”¨<code>for...in</code>å¾ªç¯ï¼Œé‚£ä¹ˆä¸è¦åœ¨å…±äº«çš„Object.prototypeä¸­å¢åŠ å¯æšä¸¾çš„å±æ€§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Object.prototype.allKeys = function() &#123;</span><br><span class="line">	var result = [];</span><br><span class="line">	for(var key in this) &#123;</span><br><span class="line">		result.push(key);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(&#123;a: 1, b: 2, c: 3&#125;).allKeys(); // [&quot;allkeys&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;]  è¯¥æ–¹æ³•æ±¡æŸ“äº†è‡ªèº«</span><br><span class="line"></span><br><span class="line">æ›´å‹å¥½çš„åšæ³•æ˜¯å°†allkeyså®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯æ–¹æ³•ï¼Œè™½ç„¶ç€ç¨å¾®æœ‰ç‚¹ä¸æ–¹ä¾¿</span><br><span class="line"></span><br><span class="line">function allKeys(obj) &#123;</span><br><span class="line">	var result = [];</span><br><span class="line">	for(var key in obj) &#123;</span><br><span class="line">		result.push(key);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ ç¡®å®æƒ³åœ¨Object.prototypeä¸­å¢åŠ å±æ€§ï¼Œ ES5æä¾›äº†ä¸€ä¸ªæ›´åŠ å‹å¥½çš„æœºåˆ¶Object.defineProperty</p>
<blockquote>
<p><code>Object.defineProperty</code>æ–¹æ³•å¯ä»¥å®šä¹‰ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å¹¶åˆ¶å®šè¯¥å±æ€§çš„å…ƒæ•°æ®ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸ä¹‹å‰å®Œå…¨ä¸€æ ·çš„æ–¹æ³•å®šä¹‰ä¸Šé¢çš„å±æ€§è€Œé€šè¿‡è®¾ç½®å…¶å¯æšä¸¾å±æ€§ä¸ºfalseä½¿å…¶åœ¨<code>for...in</code>å¾ªç¯ä¸­ä¸å¯è§ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Object.defineProperty(Object.prototype, &quot;allKeys&quot;, &#123;</span><br><span class="line">	value: function() &#123;</span><br><span class="line">		var result = [];</span><br><span class="line">		for(var key in this) &#123;</span><br><span class="line">			result.push(key);</span><br><span class="line">		&#125;</span><br><span class="line">		return result;</span><br><span class="line">	&#125;,</span><br><span class="line">	writable: true,</span><br><span class="line">	enumerable: false,</span><br><span class="line">	configurable: true</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å®ƒä¸ä¼šæ±¡æŸ“å…¶ä»–æ‰€æœ‰<code>Object</code>å®ä¾‹çš„æ‰€æœ‰<code>for...in</code>å¾ªç¯ã€‚æ¯å½“ä½ éœ€è¦å¢åŠ ä¸€ä¸ªä¸åº”è¯¥å‡ºç°åœ¨<code>for...in</code>å¾ªç¯ä¸­å‡ºç°çš„å±æ€§æ—¶ï¼ŒObject.definePropertyä¾¿æ˜¯ä½ çš„é€‰æ‹©</p>
<h2 id="é¿å…åœ¨æšä¸¾æœŸé—´ä¿®æ”¹å¯¹è±¡"><a href="#é¿å…åœ¨æšä¸¾æœŸé—´ä¿®æ”¹å¯¹è±¡" class="headerlink" title="é¿å…åœ¨æšä¸¾æœŸé—´ä¿®æ”¹å¯¹è±¡"></a>é¿å…åœ¨æšä¸¾æœŸé—´ä¿®æ”¹å¯¹è±¡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function Member(name) &#123;</span><br><span class="line">	this.name = name;</span><br><span class="line">	this.friends = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var a = new Member(&quot;Alice&quot;),</span><br><span class="line">	b = new Member(&quot;Bob&quot;),</span><br><span class="line">	c = new Member(&quot;Carol&quot;),</span><br><span class="line">	d = new Member(&quot;Dieter&quot;),</span><br><span class="line">	e = new Member(&quot;Eli&quot;),</span><br><span class="line">	f = new Member(&quot;Fatima&quot;);</span><br><span class="line"></span><br><span class="line">a.friends.push(b);</span><br><span class="line">b.friends.push(c);</span><br><span class="line">c.friends.push(e);</span><br><span class="line">d.friends.push(b);</span><br><span class="line">e.friends.push(d,f);</span><br><span class="line"></span><br><span class="line">å¦‚æœæˆ‘ä»¬å†™äº†ä¸€ä¸ªæ–¹æ³• åœ¨for...inçš„æ—¶å€™æ“ä½œå¯¹è±¡æ¯”å¦‚ï¼Œåˆ é™¤æˆ–æ·»åŠ ï¼Œ åœ¨è®¸å¤šJavaScriptç¯å¢ƒä¸­è¿™æ®µä»£ç æ ¹æœ¬ä¸èƒ½å·¥ä½œã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>ECMAScriptè§„å®šäº†ï¼Œå¦‚æœè¢«æšä¸¾çš„å¯¹è±¡åœ¨æšä¸¾æœŸé—´æ·»åŠ äº†æ–°çš„å±æ€§ï¼Œé‚£ä¹ˆåœ¨æšä¸¾æœŸé—´å¹¶ä¸èƒ½ä¿è¯æ–°æ·»åŠ çš„å±æ€§èƒ½å¤Ÿè¢«è®¿é—®ã€‚</p>
</blockquote>
<p>è¿™ä¸ªéšå¼çš„è§„èŒƒçš„å®é™…åæœæ˜¯ï¼š å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†è¢«æšä¸¾çš„å¯¹è±¡åˆ™ä¸èƒ½ä¿è¯<code>for...in</code>å¾ªç¯è¡Œä¸ºçš„å¯é¢„è§æ€§ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªWorkSetç±»æ¥è¿½è¸ªå½“å‰é›†åˆä¸­å…ƒç´ çš„æ•°é‡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">function WorkSet() &#123;</span><br><span class="line">	this.entries = new Dict();</span><br><span class="line">	this.count = 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WorkSet.prototype.isEmpty = function() &#123;</span><br><span class="line">	return this.count === 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WorkSet.prototype.add = function(key, val) &#123;</span><br><span class="line">	if(this.entries.has(key)) &#123;</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	this.entries.set(key, val);</span><br><span class="line">	this.count++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WorkSet.prototype.get = function(key) &#123;</span><br><span class="line">	return this.entries.get(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WorkSet.prototype.remove = function(key) &#123;</span><br><span class="line">	if(!this.entries.had(key)) &#123;</span><br><span class="line">		return;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	this.entries.remove(key);</span><br><span class="line">	this.count--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">WorkSet.prototype.pick = function() &#123;</span><br><span class="line">	return this.entries.pick();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è¿™é‡ŒåŒæ—¶éœ€è¦ç»™Dictç±»å¢åŠ ä¸€ä¸ªpickæ–¹æ³•</span><br><span class="line"></span><br><span class="line">Dick.prototype.pick = function() &#123;</span><br><span class="line">	for(var key in this.elements) &#123;</span><br><span class="line">		if(this.has(key)) &#123;</span><br><span class="line">			return key;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	throw new Error(&quot;empty dictionary&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç°åœ¨æˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªinNetworkçš„æ–¹æ³•</span><br><span class="line">åˆ°æœ€åå‘ç°è¿™æ®µä»£ç æ²¡ä»€ä¹ˆåµç”¨</span><br><span class="line">Member.prototype.inNetwork = function(other) &#123;</span><br><span class="line">	var visited = &#123;&#125;;</span><br><span class="line">	var workset = new WorkSet();</span><br><span class="line">	workset.add(this.name, this);</span><br><span class="line"></span><br><span class="line">	while(!workset.isEmpty()) &#123;</span><br><span class="line">		var name = = workset.pick();</span><br><span class="line">		var member = workset.get(name);</span><br><span class="line">		workset.remove(name);</span><br><span class="line">		if(name in visited) &#123;</span><br><span class="line">			continue;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		visited[name] = member;</span><br><span class="line"></span><br><span class="line">		if(member === other) &#123;</span><br><span class="line">			return true;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		member.friends.forEach(function(friend) &#123;</span><br><span class="line">			workset.add(friend.name, friend);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return false;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Špickæ–¹æ³•æ˜¯ä¸€ä¸ªä¸ç¡®å®šæ€§çš„ä¾‹å­ï¼Œ ä¸ç¡®å®šæ€§æŒ‡çš„æ˜¯ä¸€ä¸ªæ“ä½œä¸èƒ½ä¿è¯ä½¿ç”¨è¯­è¨€çš„è¯­æ„äº§ç”Ÿä¸€ä¸ªå•ä¸€çš„å¯é¢„è§çš„ç»“æœã€‚è¿™ä¸ªä¸ç¡®å®šæ€§æ¥æºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œforâ€¦inå¾ªç¯å¯èƒ½åœ¨ä¸åŒçš„JavaScriptç¯å¢ƒä¸­é€‰æ‹©ä¸åŒçš„æšä¸¾é¡ºåºã€‚<br>åŸºäºè¿™äº›åŸå› ï¼Œè€ƒè™‘ä½¿ç”¨ä¸€ä¸ªç¡®å®šçš„å·¥ä½œé›†ç®—æ³•æ›¿ä»£æ–¹æ¡ˆæ˜¯å€¼å¾—çš„ã€‚é›†å·¥ä½œåˆ—è¡¨ç®—æ³•Work-list.</p>
<ul>
<li>ä½¿ç”¨forâ€¦inå¾ªç¯æšä¸¾ä¸€ä¸ªå¯¹è±¡å±æ€§æ—¶ï¼Œç¡®ä¿ä¸è¦ä¿®æ”¹è¯¥å¯¹è±¡</li>
<li>å½“è¿­ä»£ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡çš„å†…å®¹å¯èƒ½ä¼šåœ¨å¾ªç¯æœŸé—´è¢«æ”¹å˜ï¼Œåº”è¯¥ä½¿ç”¨whileå¾ªç¯æˆ–ç»å…¸çš„forå¾ªç¯ä»£æ›¿forâ€¦inå¾ªç¯</li>
<li>ä¸ºäº†åœ¨ä¸æ–­å˜åŒ–çš„æ•°æ®ç»“æ„ä¸­èƒ½å¤Ÿé¢„æµ‹æšä¸¾ï¼Œè€ƒè™‘ä½¿ç”¨ä¸€ä¸ªæœ‰åºçš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚æ•°ç»„ï¼Œè€Œä¸è¦ä½¿ç”¨å­—å…¸å¯¹è±¡</li>
</ul>
<h2 id="æ•°ç»„è¿­ä»£ä¼˜å…ˆä½¿ç”¨forå¾ªç¯è€Œä¸æ˜¯for-in"><a href="#æ•°ç»„è¿­ä»£ä¼˜å…ˆä½¿ç”¨forå¾ªç¯è€Œä¸æ˜¯for-in" class="headerlink" title="æ•°ç»„è¿­ä»£ä¼˜å…ˆä½¿ç”¨forå¾ªç¯è€Œä¸æ˜¯for...in"></a>æ•°ç»„è¿­ä»£ä¼˜å…ˆä½¿ç”¨<code>for</code>å¾ªç¯è€Œä¸æ˜¯<code>for...in</code></h2><p>çœ‹ä¸‹é¢ä»£ç meançš„è¾“å‡ºå€¼æ—¶å¤šå°‘ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var scores = [98, 74, 85, 77, 93, 100, 89];</span><br><span class="line"></span><br><span class="line">var total = 0;</span><br><span class="line"></span><br><span class="line">for(score in scores) &#123;</span><br><span class="line">	total += score;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var mean = total / socres.length;</span><br><span class="line"></span><br><span class="line"> mean; // ?  17636.571428571428</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> è¯·è®°ä½å³ä½¿æ˜¯æ•°ç»„çš„ç´¢å¼•å±æ€§ï¼Œå¯¹è±¡å±æ€§çš„keyå§‹ç»ˆæ˜¯å­—ç¬¦ä¸²</span><br><span class="line"></span><br><span class="line"> total = 0 + &quot;0&quot; + &quot;1&quot; + &quot;2&quot; + &quot;3&quot; + &quot;4&quot; + &quot;5&quot; + &quot;6&quot;;</span><br><span class="line"></span><br><span class="line"> total = &quot;00123456&quot;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿­ä»£æ•°ç»„å†…å®¹çš„æ­£ç¡®æ–¹å¼æ˜¯ä½¿ç”¨ä¼ ç»Ÿçš„forå¾ªç¯, å»ºè®®å­˜å‚¨æ•°ç»„é•¿åº¦åˆ°ä¸€ä¸ªå±€éƒ¨å˜é‡ä¸­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var scores = [98, 74, 85, 77, 93, 100, 89];</span><br><span class="line">var total = 0;</span><br><span class="line"></span><br><span class="line">for(var i = 0, n = scores.length; i &lt; n; i++) &#123;</span><br><span class="line">	total += socres[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var mean = toal / scores.length;</span><br><span class="line"></span><br><span class="line">mean; // 88</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è¿­ä»£æ–¹æ³•ç”±äºå¾ªç¯"><a href="#è¿­ä»£æ–¹æ³•ç”±äºå¾ªç¯" class="headerlink" title="è¿­ä»£æ–¹æ³•ç”±äºå¾ªç¯"></a>è¿­ä»£æ–¹æ³•ç”±äºå¾ªç¯</h2><p>ä¸€äº›å¸¸è§çš„forå¾ªç¯é”™è¯¯</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(var i = 0; i &lt;= n; i++) &#123;...&#125;. // è·å–æœ€åä¸€é¡¹é”™è¯¯</span><br><span class="line"></span><br><span class="line">for(var i = 1; i &lt; n; i++) &#123;...&#125;. // ä¸¢å¤±ç¬¬ä¸€é¡¹</span><br><span class="line"></span><br><span class="line">for(var i = n; i &gt;= 0 ; i--) &#123;...&#125;. // è·å–èµ·å§‹å€¼é”™è¯¯</span><br><span class="line"></span><br><span class="line">for(var i = n - 1; i &gt; 0 ; i--) &#123;...&#125;. // ä¸¢å¤±æœ€åä¸€é¡¹</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é¢å¯¹è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œææ¸…æ¥šç»ˆæ­¢æ¡ä»¶æ˜¯ä¸€ä¸ªç´¯èµ˜ã€‚<br>å¹¸è¿çš„æ˜¯ES5æä¾›äº†ä¸€äº›ä¾¿åˆ©çš„æ–¹æ³•ã€‚Array.prototype.forEachæ˜¯å…¶ä¸­æœ€ç®€å•çš„ä¸€ä¸ªã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(var i = 0, n = players.length; i &lt; n; i++) &#123;</span><br><span class="line">	players[i].score++;</span><br><span class="line">&#125;</span><br><span class="line">å¯ä»¥ç”¨ä¸‹é¢ä»£ç æ›¿æ¢</span><br><span class="line">players.forEach(function(p) &#123;</span><br><span class="line">	p.socre++;</span><br><span class="line">&#125;)	</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¸ä»…æ›´ç®€å•å¯è¯»è€Œä¸”æ¶ˆé™¤äº†ç»ˆæ­¢æ¡ä»¶å’Œä»»ä½•æ•°ç»„ç´¢å¼•ã€‚</p>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯å¯¹æ•°ç»„è¿›è¡Œæ“ä½œåå»ºç«‹ä¸€ä¸ªæ–°çš„æ•°ç»„æˆ‘ä»¬å¯ä»¥è¿™æ ·å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var trimmed = [];</span><br><span class="line">for(var i = 0, n = input.lenght; i &lt; n; i++) &#123;</span><br><span class="line">	trimmed.push(input[i].trim());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨forEachæ¥å®ç°</span><br><span class="line"></span><br><span class="line">var trimmed = [];</span><br><span class="line">input.forEach(function(s) &#123;</span><br><span class="line">	trimmed.push(s.trim());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å› ä¸ºè¿™æ˜¯ä¸€ä¸ªååˆ†æ™®éçš„æ“ä½œï¼Œæ‰€ä»¥ES5æä¾›äº†ä¸€ä¸ªæ›´ç®€å•ä¼˜é›…çš„å®ç°Array.prototype.map</span><br><span class="line"></span><br><span class="line">var trimmed = input.map(function(s) &#123;</span><br><span class="line">	return s.trim();	</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦å¤–ä¸€ç§å¸¸è§çš„æ¨¡å¼æ˜¯è®¡ç®—ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè¯¥æ•°ç»„åªåŒ…å«ç°æœ‰æ•°ç»„çš„ä¸€éƒ¨åˆ†å…ƒç´ .<code>Array.prototype.filter</code>ä½¿å…¶å˜å¾—ç®€å•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">listings.filter(function(listing) &#123;</span><br><span class="line">	return listing.price &gt;= min &amp;&amp; listing.price &lt;= max;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿™äº›éƒ½æ˜¯ES5çš„é»˜è®¤æ–¹æ³•ï¼Œæˆ‘ä»¬å½“ç„¶å¯ä»¥å®ç°è‡ªå·±çš„æ–¹æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦è¿™æ ·ä¸€ä¸ªæ¨¡å¼ï¼Œæå–æ»¡è¶³è°“è¯çš„æ•°ç»„çš„å‰å‡ ä¸ªå…ƒç´ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function takeWhile(a, pred) &#123;</span><br><span class="line">	var result = [];</span><br><span class="line">	for(var i = 0, n = a.length; i &lt; n; i++) &#123;</span><br><span class="line">		if(!pred(a[i], i)) &#123;</span><br><span class="line">			break;</span><br><span class="line">		&#125;</span><br><span class="line">		result[i] = a[i];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var prefix = taleWhile([1, 2, 4, 8, 16, 32], function(n) &#123;</span><br><span class="line">	return n &lt; 10;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// [1, 2, 4, 8]</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¯·æ³¨æ„æˆ‘ä»¬å°†ç´¢å¼•ièµ‹å€¼ç»™äº†pred, æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä½¿ç”¨æˆ–å¿½ç•¥è¯¥ç´¢å¼•ã€‚äº‹å®ä¸Šæ ‡å‡†åº“ä¸­çš„æ‰€æœ‰è¿­ä»£æ–¹æ³•åŒ…æ‹¬(forEach, map, filter)éƒ½å°†æ•°ç»„ç´¢å¼•ä¼ é€’ç»™äº†ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†takeWhileåŠ å…¥åˆ°Array.prototypeä¸­å‚è€ƒçŒ´å­è¡¥ä¸çš„å½±å“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.takeWhile = function(pred) &#123;</span><br><span class="line">	var result = [];</span><br><span class="line">	for(var i = 0, n = this.length; i &lt; n; i++) &#123;</span><br><span class="line">		if(!pred(this[i], i)) &#123;</span><br><span class="line">			break;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		result[i] = this[i];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var prefix = [1, 2, 4, 8, 16, 32].takeWhile(function(n) &#123;</span><br><span class="line">	return n &lt; 10;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¾ªç¯åªæœ‰ä¸€ç‚¹ä¼˜äºè¿­ä»£å‡½æ•°ï¼Œé‚£å°±æ˜¯å‰è€…æœ‰æ§åˆ¶æµæ“ä½œï¼Œå¦‚break å’Œcontinueã€‚ </p>
</blockquote>
<p>ä¸¾ä¾‹æ¥è¯´</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">function takeWhile(a, pred) &#123;</span><br><span class="line">	var result = [];</span><br><span class="line">	a.forEach(function(x, i) &#123;</span><br><span class="line">		if(!pred(x)) &#123;</span><br><span class="line">			// ?</span><br><span class="line">		&#125;</span><br><span class="line">		result[i] = x;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå†…éƒ¨å¼‚å¸¸æ¥æå‰ç»ˆæ­¢è¯¥å¾ªç¯ï¼Œä½†æ˜¯è¿™æ—¢å°´å°¬åˆæ•ˆç‡ä½ä¸‹</span><br><span class="line"></span><br><span class="line">function takeWhile(a, pred) &#123;</span><br><span class="line">	var result = [];</span><br><span class="line">	var earlyExit = [];</span><br><span class="line">	try &#123;</span><br><span class="line">		a.forEach(function(x, i) &#123;</span><br><span class="line">			if(!pred(x)) &#123;</span><br><span class="line">				throw earlyExit;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			result[i] = x;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125; catch(e) &#123;</span><br><span class="line">		if(e !== earlyExit) &#123;</span><br><span class="line">			throw e;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ES5çš„æ•°ç»„æ–¹æ³•someå’Œeveryå¯ä»¥ç”¨äºæå‰ç»ˆæ­¢å¾ªç¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[1, 10, 100].some(function(x) &#123;.return x &gt; 5; &#125;);  // true</span><br><span class="line">[1, 10, 100].some(function(x) &#123;.return x &lt; 0; &#125;);  // false</span><br><span class="line"></span><br><span class="line">[1, 10, 100].every(function(x) &#123;.return x &gt; 0; &#125;);  // true</span><br><span class="line">[1, 10, 100].every(function(x) &#123;.return x &lt; 3; &#125;);  // true</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åˆ©ç”¨è¿™ä¸€ç‚¹æˆ‘ä»¬å¯ä»¥é‡æ–°å®ç°takeWhileæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function takeWhile(a, pred) &#123;</span><br><span class="line">	var result = [];</span><br><span class="line"></span><br><span class="line">	a.every(function(x, i) &#123;</span><br><span class="line">		if(!pred(x)) &#123;</span><br><span class="line">			return false; // break</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		result[i] = x;</span><br><span class="line">		return true;  // continue</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	return result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨è¿­ä»£æ–¹æ³• forEach å’Œmapæ›¿æ¢forå¾ªç¯ä½¿å¾—ä»£ç æ›´å¯è¯»ï¼Œå¹¶ä¸”é¿å…äº†é‡å¤å¾ªç¯æ§åˆ¶é€»è¾‘</li>
<li>ä½¿ç”¨è‡ªå®šä¹‰çš„è¿­ä»£å‡½æ•°æ¥æŠ½è±¡æœªè¢«æ ‡å‡†åº“æ”¯æŒçš„å¸¸è§å¾ªç¯æ¨¡å¼</li>
<li>åœ¨éœ€è¦æå‰ç»ˆæ­¢å¾ªç¯çš„æƒ…å†µä¸‹ï¼Œ ä»ç„¶æ¨èä½¿ç”¨ä¼ ç»Ÿçš„å¾ªç¯ã€‚å¦å¤–ï¼Œsomeå’Œeveryæ–¹æ³•ä¹Ÿå¯ç”¨äºæå‰é€€å‡º</li>
</ul>
<h2 id="åœ¨ç±»æ•°ç»„å¯¹è±¡ä¸Šå¤ç”¨é€šç”¨çš„æ•°ç»„æ–¹æ³•"><a href="#åœ¨ç±»æ•°ç»„å¯¹è±¡ä¸Šå¤ç”¨é€šç”¨çš„æ•°ç»„æ–¹æ³•" class="headerlink" title="åœ¨ç±»æ•°ç»„å¯¹è±¡ä¸Šå¤ç”¨é€šç”¨çš„æ•°ç»„æ–¹æ³•"></a>åœ¨ç±»æ•°ç»„å¯¹è±¡ä¸Šå¤ç”¨é€šç”¨çš„æ•°ç»„æ–¹æ³•</h2><p><code>Array.prototype</code>ä¸­çš„æ ‡å‡†æ–¹æ³•è¢«è®¾è®¡æˆå…¶ä»–å¯¹è±¡å¯å¤ç”¨çš„æ–¹æ³•ï¼Œå³ä½¿è¿™äº›å¯¹è±¡å¹¶æ²¡æœ‰ç»§æ‰¿Array,ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ å‡½æ•°çš„argumentså¯¹è±¡ï¼Œå®ƒå¹¶æ²¡æœ‰ç»§æ‰¿Array.prototypeï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ç®€å•çš„è°ƒç”¨arguments.forEachæ–¹æ³•æ¥éå†æ¯ä¸€ä¸ªå‚æ•°ã€‚å–è€Œä»£ä¹‹æˆ‘ä»¬æå–forEachæ–¹æ³•å¯¹è±¡çš„å¼•ç”¨å¹¶ä½¿ç”¨å…¶callæ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// åŒæ ·ä¹Ÿå¯å…ˆè½¬åŒ–ä¸ºä¸€ä¸ªæ•°ç»„ var args = [].slice.call(arguments);</span><br><span class="line"></span><br><span class="line">function highlight() &#123;</span><br><span class="line">	[].forEach.call(arguments, function(widget) &#123;</span><br><span class="line">		widget.setBackground(&quot;yellow&quot;);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚ä½•ä½¿ä¸€ä¸ªå¯¹è±¡â€œçœ‹èµ·æ¥åƒæ•°ç»„â€ï¼Œæ•°ç»„å¯¹è±¡çš„åŸºæœ¬å¥‘çº¦æ€»å…±æœ‰ä¸¤ä¸ªç®€å•è§„åˆ™</p>
<ul>
<li>å…·æœ‰ä¸€ä¸ªèŒƒå›´åœ¨0-2^32-1çš„æ•´å‹lengthå±æ€§ã€‚</li>
<li>lengthå±æ€§å¤§äºè¯¥å¯¹è±¡çš„æœ€å¤§ç´¢å¼•ã€‚ç´¢å¼•çš„èŒƒå›´æ˜¯0-2^32-2çš„æ•´æ•°ï¼Œå®ƒçš„å­—ç¬¦ä¸²è¡¨ç¤ºå°±æ˜¯è¯¥å¯¹è±¡çš„ä¸€ä¸ªkey</li>
</ul>
<p>ä¾‹å­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arrayLike = &#123;0: &quot;a&quot;, 1: &quot;b&quot;, 2: &quot;c&quot;, length: 3&#125;</span><br><span class="line">var result = Array.prototype.map.call(arrayLike, function(s) &#123;</span><br><span class="line">	return s.toUpperCase();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;]</span><br></pre></td></tr></table></figure>

<p>å­—ç¬¦ä¸²ä¹Ÿè¡¨ç°ä¸ºä¸å¯å˜çš„æ•°ç»„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯å¯ç´¢å¼•çš„ï¼Œ å¹¶ä¸”å…¶é•¿åº¦ä¹Ÿå¯ä»¥é€šè¿‡lengthå±æ€§è·å–ã€‚å› æ­¤ï¼ŒArray.prototypeä¸­çš„æ–¹æ³•æ“ä½œå­—ç¬¦ä¸²ä¸å›ä¿®æ”¹åŸå§‹æ•°ç»„ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var result = Array.prototype.map.call(&quot;abc&quot;, function(s) &#123;</span><br><span class="line">	return s.toUpperCase();	</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¯¹äºä½¿ç”¨Array.prototypeä¸­çš„æ–¹æ³•ï¼Œåœ¨å¢åŠ æˆ–åˆ é™¤ç´¢å¼•å±æ€§çš„æ—¶å€™å®ƒä»¬éƒ½ä¼šå¼ºåˆ¶çš„æ›´æ–°lengthå±æ€§ã€‚æ‰€æœ‰çš„Array.prototypeæ–¹æ³•åœ¨ç±»æ•°ç»„ä¸­å¯ä»¥é€šç”¨ã€‚</p>
<p>åªæœ‰ä¸€ä¸ªArrayæ–¹æ³•ä¸æ˜¯é€šç”¨çš„é‚£å°±æ˜¯æ•°ç»„è¿æ¥æ–¹æ³•concatã€‚è¯¥æ–¹æ³•å¯ä»¥ç”±ä»»æ„çš„ç±»æ•°ç»„è°ƒç”¨ä½†æ˜¯å®ƒä¼šæ£€æŸ¥å…¶å‚æ•°çš„[[Class]]å±æ€§ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªçœŸå®çš„æ•°ç»„æ‰ä¼šè¿æ¥ï¼Œå¦‚æœä¸æ˜¯ä¾‹å­å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function nameColum() &#123;</span><br><span class="line">	return [&quot;Names&quot;].concat(arguments);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">namesColumn(&quot;Alice&quot;,&quot;Bob&quot;, &quot;Chris&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// [&quot;Names&quot;, &#123;.0: &quot;Alice&quot;, 1: &quot;Bob&quot;, 2: &quot;Chris&quot; &#125;]</span><br><span class="line"></span><br><span class="line">è¿™ç§æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°ç»„è½¬æ¢çš„æ–¹æ³•</span><br><span class="line">function nameColum() &#123;</span><br><span class="line">	return [&quot;Names&quot;].concat([].slice.call(arguments));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">namesColumn(&quot;Alice&quot;,&quot;Bob&quot;, &quot;Chris&quot;);</span><br><span class="line"></span><br><span class="line">// [&quot;Names&quot;, &quot;Alice&quot;,&quot;Bob&quot;, &quot;Chris&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ•°ç»„å­—é¢é‡ä¼˜äºæ•°ç»„æ„é€ å‡½æ•°"><a href="#æ•°ç»„å­—é¢é‡ä¼˜äºæ•°ç»„æ„é€ å‡½æ•°" class="headerlink" title="æ•°ç»„å­—é¢é‡ä¼˜äºæ•°ç»„æ„é€ å‡½æ•°"></a>æ•°ç»„å­—é¢é‡ä¼˜äºæ•°ç»„æ„é€ å‡½æ•°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">var a = [1, 2, 3, 4, 5];</span><br><span class="line"></span><br><span class="line">ä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„æ„é€ å‡½æ•°æ¥æ›¿ä»£</span><br><span class="line"></span><br><span class="line">var a = new Array(1, 2, 3, 4, 5);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æœ‰è¿™æ ·å‡ ä¸ªé—®é¢˜</span><br><span class="line">é¦–å…ˆè¦ä¿è¯æ²¡æœ‰äººé‡æ–°åŒ…è£…è¿‡Arrayå˜é‡</span><br><span class="line">function f(Array) &#123;</span><br><span class="line">	return new Array(1, 2, 3, 4, 5);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f(String);  //  new String(1)</span><br><span class="line"></span><br><span class="line">å…¶æ¬¡è¦ç¡®ä¿æ²¡äººä¿®æ”¹è¿‡å…¨å±€Arrayå˜é‡</span><br><span class="line"></span><br><span class="line">Array = String;</span><br><span class="line">new Array(1, 2, 3, 4, 5); // new String(1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ </span><br><span class="line"></span><br><span class="line">[&quot;hello&quot;] å’Œ new Array(&quot;hello&quot;) è¡Œä¸ºè™½ç„¶ä¸€è‡´</span><br><span class="line"></span><br><span class="line">ä½†æ˜¯</span><br><span class="line"></span><br><span class="line">[17] å’Œ new Array(17) è¡Œä¸ºå®Œå…¨ä¸åŒäº†</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨æ•°ç»„å­—é¢é‡æ›¿ä»£æ•°ç»„æ„é€ å‡½æ•°</li>
</ul>
</div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š</strong>toshiba</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong><a href="https://sdongzhi.com/2018/09/25/read-book-effective-eight/" title="Effective JavaScript (å…«)">https://sdongzhi.com/2018/09/25/read-book-effective-eight/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š</strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é»˜è®¤é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> è®¸å¯åè®®ã€‚</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2018/09/28/read-book-effective-ten/" rel="prev" title="Effective JavaScript (å)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Effective JavaScript (å)</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2018/09/19/read-book-effective-seven/" rel="next" title="Effective JavaScript (ä¸ƒ)"><span class="post-nav-text">Effective JavaScript (ä¸ƒ)</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>è‹¥æ‚¨æƒ³åŠæ—¶å¾—åˆ°å›å¤æé†’ï¼Œå»ºè®®è·³è½¬ GitHub Issues è¯„è®ºã€‚</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2017 â€“ 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> å¤šå¼—æœ—æ˜å“¥</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="æœç´¢"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div></div><!-- hexo injector body_end start --><script src="https://cdn.jsdelivr.net/npm/hexo-tag-common@latest/js/index.js"></script><!-- hexo injector body_end end --></body></html>